{"version":3,"sources":["main.min.js","main.js"],"names":["getFormData","form","document","getElementById","data","Object","keys","elements","map","key","isNaN","value","emailValid","email","re","test","formLoading","event","target","children","contact_form__submit","disabled","innerHTML","className","style","display","formLoadingReset","inputsFilled","filled","message","length","name","handleFormSubmit","preventDefault","isLoading","allInputsFilled","url","action","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","status","console","log","responseText","encoded","encodeURIComponent","join","send","menuTrigger","overlay","classList","toggle","overlayActive","contains","scrollTo","getAttribute","scrollIntoView","behavior","insertPortoflioItems","items","container","forEach","element","index","section","createElement","sectionMedia","previewImage","sectionText","previewText","appendChild","fillPortfolioItemDescription","itemId","itemName","querySelector","itemDescrption","imagesContainer","toolsContainer","liveAt","externalLinkButton","PORTFOLIO_ITEMS","description","images","tools","TOOLS","icon","href","viewChanger","onViewChange","evt","currentTarget","portfolioItemId","view","portfolioDescriptionView","scrollTop","backButton","querySelectorAll","listItems","j","addEventListener","k","loaded","menuBtn","menuBtnClose","menuLinks","getElementsByClassName","i","isLocalhost","Boolean","window","location","hostname","match","navigator","protocol","serviceWorker","register","then","registration","onupdatefound","controller","installingWorker","installing","onstatechange","state","Error","e","error","sketch","mailingHtml","spotify"],"mappings":"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","file":"main.min.js","sourcesContent":["'use strict'; /*!\n               *\n               *  Web Starter Kit\n               *  Copyright 2015 Google Inc. All rights reserved.\n               *\n               *  Licensed under the Apache License, Version 2.0 (the \"License\");\n               *  you may not use this file except in compliance with the License.\n               *  You may obtain a copy of the License at\n               *\n               *    https://www.apache.org/licenses/LICENSE-2.0\n               *\n               *  Unless required by applicable law or agreed to in writing, software\n               *  distributed under the License is distributed on an \"AS IS\" BASIS,\n               *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n               *  See the License for the specific language governing permissions and\n               *  limitations under the License\n               *\n               */\n/* eslint-env browser */\n(function () {\n  'use strict';\n\n  // Check to make sure service workers are supported in the current browser,\n  // and that the current page is accessed from a secure origin. Using a\n  // service worker from an insecure origin will trigger JS console errors. See\n  // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n  var isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.1/8 is considered localhost for IPv4.\n  window.location.hostname.match(\n  /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));\n\n\n\n  if ('serviceWorker' in navigator && (\n  window.location.protocol === 'https:' || isLocalhost)) {\n    navigator.serviceWorker.register('service-worker.js').\n    then(function (registration) {\n      // updatefound is fired if service-worker.js changes.\n      registration.onupdatefound = function () {\n        // updatefound is also fired the very first time the SW is installed,\n        // and there's no need to prompt for a reload at that point.\n        // So check here to see if the page is already controlled,\n        // i.e. whether there's an existing service worker.\n        if (navigator.serviceWorker.controller) {\n          // The updatefound event implies that registration.installing is set:\n          // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html\n          var installingWorker = registration.installing;\n\n          installingWorker.onstatechange = function () {\n            switch (installingWorker.state) {\n              case 'installed':\n                // At this point, the old content will have been purged and the\n                // fresh content will have been added to the cache.\n                // It's the perfect time to display a \"New content is\n                // available; please refresh.\" message in the page's interface.\n                break;\n\n              case 'redundant':\n                throw new Error('The installing ' +\n                'service worker became redundant.');\n\n              default:\n              // Ignore\n            }\n          };\n        }\n      };\n    }).catch(function (e) {\n      console.error('Error during service worker registration:', e);\n    });\n  }\n\n  /**\n    *\n    *\n    *\n    * Custom JavaScript\n    *\n    *\n    *\n    **/\n\n  var PORTFOLIO_ITEMS = [\n  {\n    name: 'test',\n    previewText: 'Elit fringilla rutrum. Aenean sollicitudin, erat a elementum rutrum, neque sem pretium metus, quis mollis nisl nunc et massa. Vestibulum sed metus in lorem tristique ullamcorper id vitae erat.',\n    previewImage: './images/portfolio_items/1.jpg',\n    description: 'description',\n    images: ['./images/portfolio_items/1.jpg'],\n    tools: ['sketch', 'mailingHtml', 'spotify'],\n    liveAt: 'google.com' },\n\n  {\n    name: 'test 2',\n    previewText: 'Vestibulum sed metus in lorem tristique ullamcorper id vitae erat.',\n    previewImage: './images/portfolio_items/2.jpg',\n    description: 'description 2',\n    images: ['./images/portfolio_items/2.jpg', './images/portfolio_items/1.jpg'],\n    tools: ['sketch', 'mailingHtml'],\n    liveAt: 'facebook.com' }];\n\n\n\n  var TOOLS = {\n    sketch: {\n      name: 'Sketch',\n      icon: './images/tool-sketch.png' },\n\n    mailingHtml: {\n      name: 'E-mailing HTML',\n      icon: './images/tool-template.png' },\n\n    spotify: {\n      name: 'Spotify',\n      icon: './images/tool-spotify.png' } };\n\n\n\n  /**\n                                             * Gets contact form input values\n                                             * @return {object} set of inputs -> object[input_name] = input_value\n                                             */\n  function getFormData() {\n    var form = document.getElementById('contact_form');\n    // get form inputs data\n    var data = {};\n    Object.keys(form.elements).map(function (key) {\n      if (isNaN(key)) {\n        data[key] = form.elements[key].value;\n      }\n    });\n    return data;\n  }\n\n  /**\n    * Email validation regexp\n    * @param {string} email for validation\n    * @return {boolean} email validation result\n    */\n  function emailValid(email) {\n    var re = /^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i;\n    return !re.test(email);\n  }\n\n  /**\n    * Form state - loading\n    * @param {Object} event DOM form event\n    * @return {boolean} is loading? true\n    */\n  function formLoading(event) {\n    // make visual change for loading state\n    event.target.children.contact_form__submit.disabled = true;\n    event.target.children.contact_form__submit.innerHTML = 'Wysyłanie...';\n    event.target.children.contact_form__submit.className += ' button--loading';\n    document.getElementById('form__error').style.display = 'none';\n\n    return true;\n  }\n  /**\n    * Form loading state - reset\n    * @param {Object} event DOM form event\n    * @return {boolean} is loading? false\n    */\n  function formLoadingReset(event) {\n    // make visual change for loading state\n    event.target.children.contact_form__submit.disabled = false;\n    event.target.children.contact_form__submit.innerHTML = 'Wyślij';\n    event.target.children.contact_form__submit.className = 'button button--primary';\n\n    return false;\n  }\n  /**\n    * Detects empty inputs in form\n    * @param {Object} event DOM form event\n    * @return {boolean} every form inputs filled?\n    */\n  function inputsFilled(event) {\n    var filled = true;\n    if (event.target.message.value.length === 0) {\n      filled = false;\n    }\n    if (event.target.name.value.length === 0) {\n      filled = false;\n    }\n    if (event.target.email.value.length === 0) {\n      filled = false;\n    }\n\n    return filled;\n  }\n\n  /**\n    * Send form data\n    * @param {Object} event DOM event\n    */\n  function handleFormSubmit(event) {\n    event.preventDefault();\n    var data = getFormData();\n    var isLoading = false;\n    var allInputsFilled = inputsFilled(event);\n\n    // VALIDATION\n    if (isLoading || !allInputsFilled) {\n      document.getElementById('form__error').innerHTML = 'Uzupełnij wszystkie pola formularza';\n      document.getElementById('form__error').style.display = 'block';\n    } else if (emailValid(data.email)) {\n      document.getElementById('form__error').innerHTML = 'Wpisz prawidłowy adres e-mail';\n      document.getElementById('form__error').style.display = 'block';\n    } else {\n      // VALIDATION PASSED\n      isLoading = formLoading(event);\n      var url = event.target.action;\n      var xhr = new XMLHttpRequest();\n      xhr.open('POST', url);\n      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n      xhr.onreadystatechange = function () {\n        isLoading = formLoadingReset(event);\n        if (xhr.status === 200) {\n          document.getElementById('contact_form').style.display = 'none';\n          document.getElementById('thankyou_message').style.display = 'block';\n        } else {\n          document.getElementById('form__error').innerHTML = 'Coś poszło nie tak :( <br /> Wyślij proszę e-mail na adres: <a href=\"mailto:waskowski.mikolaj@gmail.com\">waskowski.mikolaj@gmail.com</a>. <br /> Dziękuję!';\n          document.getElementById('form__error').style.display = 'block';\n          console.log(xhr.responseText);\n        }\n      };\n      // url encode form data for sending as post data\n      var encoded = Object.keys(data).map(function (key) {\n        return encodeURIComponent(key) + '=' + encodeURIComponent(data[key]);\n      }).join('&');\n\n      xhr.send(encoded);\n    }\n  }\n\n  /**\n    * Activating overlay menu\n    */\n  function menuTrigger() {\n    var overlay = document.getElementById('overlay');\n    overlay.classList.toggle('menu-overlay--open');\n  }\n\n  /**\n    * Check that menu is opened (overlay is active)\n    * @return {boolean} Menu active?\n    */\n  function overlayActive() {\n    return document.getElementById('overlay').classList.contains('menu-overlay--open');\n  }\n\n  /**\n    * Scrolls to element, closing menu overlay if needed\n    * @param {Object} event DOM event\n    */\n  function scrollTo(event) {\n    // goto section marked as button data-goto attribute\n    document.getElementById(event.target.getAttribute('data-goto')).scrollIntoView({\n      behavior: 'smooth' });\n\n    // need to close menu overlay?\n    if (overlayActive()) {\n      menuTrigger();\n    }\n  }\n\n  /**\n    * Fill portfolio with Portfolio_items\n    * @param {Array} items - array of portfolio items\n    */\n  function insertPortoflioItems(items) {\n    var container = document.getElementById('portfolio_items_container');\n    items.forEach(function (element, index) {\n      // create main container\n      var section = document.createElement('section');\n      section.className += ' container section section--left section--portfolio-item ';\n      // create box for item preview\n      var sectionMedia = document.createElement('div');\n      sectionMedia.className += ' section__media section__media--portfolio-item ';\n      sectionMedia.innerHTML = '<img src=\"' + element.previewImage + '\" alt=\"portfolio_item\" class=\"button--show-more\" data-itemid=\"' + index + '\" />';\n      // create box for item name and description\n      var sectionText = document.createElement('div');\n      sectionText.className += ' section__text section__text--portfolio-item ';\n      sectionText.innerHTML = '<h3 class=\"section__title\">' + element.name + '</h3>';\n      sectionText.innerHTML += '<p>' + element.previewText + '</p>';\n      sectionText.innerHTML += '<button class=\"button button--text button--green button--show-more\" data-itemid=\"' + index + '\"><img src=\"./images/icon-info.svg\" alt=\"\" class=\"button__icon--left\" /> Zobacz szczegóły</button>';\n      section.appendChild(sectionMedia);\n      section.appendChild(sectionText);\n      container.appendChild(section);\n    });\n  }\n\n  /**\n    * Fill portfolio item description with data\n    * @param {Number} itemId - id of portfolio item\n    */\n  function fillPortfolioItemDescription(itemId) {\n    var itemName = document.querySelector('.portfolio__item-name');\n    var itemDescrption = document.querySelector('.portfolio__item-description');\n    var imagesContainer = document.querySelector('.portfolio__images');\n    var toolsContainer = document.querySelector('.tools');\n    var liveAt = document.querySelector('.portfolio__live-at');\n    var externalLinkButton = document.querySelector('.button--live-at');\n\n    itemName.innerHTML = PORTFOLIO_ITEMS[itemId].name;\n    itemDescrption.innerHTML = PORTFOLIO_ITEMS[itemId].description;\n    // clear images container from old images\n    imagesContainer.innerHTML = '';\n    // fill images container with new images\n    PORTFOLIO_ITEMS[itemId].images.forEach(function (element, index) {\n      imagesContainer.innerHTML += '<img src=\"' + element + '\" alt=\"' + PORTFOLIO_ITEMS[itemId].name + ' - #' + index + ' presentation image\" class=\"portfolio__image\" /> ';\n    });\n    toolsContainer.innerHTML = '';\n    PORTFOLIO_ITEMS[itemId].tools.forEach(function (element) {\n      toolsContainer.innerHTML += '<div class=\"tools_item\"><img src=\"' + TOOLS[element].icon + '\" alt=\"\" class=\"\"><p>' + TOOLS[element].name + '</p></div>';\n    });\n    liveAt.innerHTML = '<p>' + PORTFOLIO_ITEMS[itemId].liveAt + '</p>';\n    externalLinkButton.href = '//' + PORTFOLIO_ITEMS[itemId].liveAt;\n  }\n\n  /**\n    * Make portfolio item alive\n    **/\n  function viewChanger() {\n    var view = document.querySelector('.view');\n    var backButton = document.querySelectorAll('.button--back');\n    var listItems = document.querySelectorAll('.button--show-more');\n    var portfolioDescriptionView = document.querySelector('.screen--portfolio-item');\n\n    /**\n                                                                                      * While clicking \"Show more\", activate description view and fill it with data\n                                                                                      * @param {Object} evt - button click event\n                                                                                      **/\n    function onViewChange(evt) {\n      evt.preventDefault();\n      // change details data\n      if (evt.currentTarget.classList.contains('button--show-more')) {\n        var portfolioItemId = evt.currentTarget.getAttribute('data-itemid');\n        fillPortfolioItemDescription(portfolioItemId);\n      }\n      // change view - add \"active\" class to main view container\n      view.classList.toggle('view--change');\n      // go to the top of portfolio item description container while \"show more\" event\n      if (view.classList.contains('view--change')) {\n        portfolioDescriptionView.scrollTop = 0;\n      }\n    }\n\n    for (var j = 0; j < listItems.length; j++) {\n      listItems[j].addEventListener('click', onViewChange, false);\n    }\n    for (var k = 0; k < backButton.length; k++) {\n      backButton[k].addEventListener('click', onViewChange, false);\n    }\n  }\n\n  /**\n    * Runs while document is loaded...\n    */\n  function loaded() {\n    // prevent default submit form action, redirect to handleFormSubmit()\n    var form = document.getElementById('contact_form');\n    form.addEventListener('submit', handleFormSubmit, false);\n    console.log('Info: form submit function loaded');\n\n    // make internal buttons alive\n    var menuBtn = document.getElementById('menu-button');\n    menuBtn.addEventListener('click', menuTrigger, false);\n    var menuBtnClose = document.getElementById('menu-button-close');\n    menuBtnClose.addEventListener('click', menuTrigger, false);\n    var menuLinks = document.getElementsByClassName('internal-link');\n    for (var i = 0; i < menuLinks.length; i++) {\n      menuLinks[i].addEventListener('click', scrollTo, false);\n    }\n    console.log('Info: menu trigger functions loaded');\n\n    // create portfolio items\n    insertPortoflioItems(PORTFOLIO_ITEMS);\n\n    // make portoflio item alive\n    viewChanger();\n  }\n  document.addEventListener('DOMContentLoaded', loaded, false);\n})();\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaXNMb2NhbGhvc3QiLCJCb29sZWFuIiwid2luZG93IiwibG9jYXRpb24iLCJob3N0bmFtZSIsIm1hdGNoIiwibmF2aWdhdG9yIiwicHJvdG9jb2wiLCJzZXJ2aWNlV29ya2VyIiwicmVnaXN0ZXIiLCJ0aGVuIiwicmVnaXN0cmF0aW9uIiwib251cGRhdGVmb3VuZCIsImNvbnRyb2xsZXIiLCJpbnN0YWxsaW5nV29ya2VyIiwiaW5zdGFsbGluZyIsIm9uc3RhdGVjaGFuZ2UiLCJzdGF0ZSIsIkVycm9yIiwiY2F0Y2giLCJlIiwiY29uc29sZSIsImVycm9yIiwiUE9SVEZPTElPX0lURU1TIiwibmFtZSIsInByZXZpZXdUZXh0IiwicHJldmlld0ltYWdlIiwiZGVzY3JpcHRpb24iLCJpbWFnZXMiLCJ0b29scyIsImxpdmVBdCIsIlRPT0xTIiwic2tldGNoIiwiaWNvbiIsIm1haWxpbmdIdG1sIiwic3BvdGlmeSIsImdldEZvcm1EYXRhIiwiZm9ybSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJkYXRhIiwiT2JqZWN0Iiwia2V5cyIsImVsZW1lbnRzIiwibWFwIiwia2V5IiwiaXNOYU4iLCJ2YWx1ZSIsImVtYWlsVmFsaWQiLCJlbWFpbCIsInJlIiwidGVzdCIsImZvcm1Mb2FkaW5nIiwiZXZlbnQiLCJ0YXJnZXQiLCJjaGlsZHJlbiIsImNvbnRhY3RfZm9ybV9fc3VibWl0IiwiZGlzYWJsZWQiLCJpbm5lckhUTUwiLCJjbGFzc05hbWUiLCJzdHlsZSIsImRpc3BsYXkiLCJmb3JtTG9hZGluZ1Jlc2V0IiwiaW5wdXRzRmlsbGVkIiwiZmlsbGVkIiwibWVzc2FnZSIsImxlbmd0aCIsImhhbmRsZUZvcm1TdWJtaXQiLCJwcmV2ZW50RGVmYXVsdCIsImlzTG9hZGluZyIsImFsbElucHV0c0ZpbGxlZCIsInVybCIsImFjdGlvbiIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJzdGF0dXMiLCJsb2ciLCJyZXNwb25zZVRleHQiLCJlbmNvZGVkIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwiam9pbiIsInNlbmQiLCJtZW51VHJpZ2dlciIsIm92ZXJsYXkiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJvdmVybGF5QWN0aXZlIiwiY29udGFpbnMiLCJzY3JvbGxUbyIsImdldEF0dHJpYnV0ZSIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJpbnNlcnRQb3J0b2ZsaW9JdGVtcyIsIml0ZW1zIiwiY29udGFpbmVyIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJpbmRleCIsInNlY3Rpb24iLCJjcmVhdGVFbGVtZW50Iiwic2VjdGlvbk1lZGlhIiwic2VjdGlvblRleHQiLCJhcHBlbmRDaGlsZCIsImZpbGxQb3J0Zm9saW9JdGVtRGVzY3JpcHRpb24iLCJpdGVtSWQiLCJpdGVtTmFtZSIsInF1ZXJ5U2VsZWN0b3IiLCJpdGVtRGVzY3JwdGlvbiIsImltYWdlc0NvbnRhaW5lciIsInRvb2xzQ29udGFpbmVyIiwiZXh0ZXJuYWxMaW5rQnV0dG9uIiwiaHJlZiIsInZpZXdDaGFuZ2VyIiwidmlldyIsImJhY2tCdXR0b24iLCJxdWVyeVNlbGVjdG9yQWxsIiwibGlzdEl0ZW1zIiwicG9ydGZvbGlvRGVzY3JpcHRpb25WaWV3Iiwib25WaWV3Q2hhbmdlIiwiZXZ0IiwiY3VycmVudFRhcmdldCIsInBvcnRmb2xpb0l0ZW1JZCIsInNjcm9sbFRvcCIsImoiLCJhZGRFdmVudExpc3RlbmVyIiwiayIsImxvYWRlZCIsIm1lbnVCdG4iLCJtZW51QnRuQ2xvc2UiLCJtZW51TGlua3MiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaSJdLCJtYXBwaW5ncyI6ImNBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtCQTtBQUNBLENBQUMsWUFBVztBQUNWOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSUEsY0FBY0MsUUFBUUMsT0FBT0MsUUFBUCxDQUFnQkMsUUFBaEIsS0FB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biAqXG4gKiAgV2ViIFN0YXJ0ZXIgS2l0XG4gKiAgQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqICB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqICBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiAgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqICBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZVxuICpcbiAqL1xuLyogZXNsaW50LWVudiBicm93c2VyICovXG4oZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBDaGVjayB0byBtYWtlIHN1cmUgc2VydmljZSB3b3JrZXJzIGFyZSBzdXBwb3J0ZWQgaW4gdGhlIGN1cnJlbnQgYnJvd3NlcixcbiAgLy8gYW5kIHRoYXQgdGhlIGN1cnJlbnQgcGFnZSBpcyBhY2Nlc3NlZCBmcm9tIGEgc2VjdXJlIG9yaWdpbi4gVXNpbmcgYVxuICAvLyBzZXJ2aWNlIHdvcmtlciBmcm9tIGFuIGluc2VjdXJlIG9yaWdpbiB3aWxsIHRyaWdnZXIgSlMgY29uc29sZSBlcnJvcnMuIFNlZVxuICAvLyBodHRwOi8vd3d3LmNocm9taXVtLm9yZy9Ib21lL2Nocm9taXVtLXNlY3VyaXR5L3ByZWZlci1zZWN1cmUtb3JpZ2lucy1mb3ItcG93ZXJmdWwtbmV3LWZlYXR1cmVzXG4gIHZhciBpc0xvY2FsaG9zdCA9IEJvb2xlYW4od2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09PSAnbG9jYWxob3N0JyB8fFxuICAgICAgLy8gWzo6MV0gaXMgdGhlIElQdjYgbG9jYWxob3N0IGFkZHJlc3MuXG4gICAgICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdbOjoxXScgfHxcbiAgICAgIC8vIDEyNy4wLjAuMS84IGlzIGNvbnNpZGVyZWQgbG9jYWxob3N0IGZvciBJUHY0LlxuICAgICAgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLm1hdGNoKFxuICAgICAgICAvXjEyNyg/OlxcLig/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPykpezN9JC9cbiAgICAgIClcbiAgICApO1xuXG4gIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yICYmXG4gICAgICAod2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyB8fCBpc0xvY2FsaG9zdCkpIHtcbiAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3Rlcignc2VydmljZS13b3JrZXIuanMnKVxuICAgIC50aGVuKGZ1bmN0aW9uKHJlZ2lzdHJhdGlvbikge1xuICAgICAgLy8gdXBkYXRlZm91bmQgaXMgZmlyZWQgaWYgc2VydmljZS13b3JrZXIuanMgY2hhbmdlcy5cbiAgICAgIHJlZ2lzdHJhdGlvbi5vbnVwZGF0ZWZvdW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIHVwZGF0ZWZvdW5kIGlzIGFsc28gZmlyZWQgdGhlIHZlcnkgZmlyc3QgdGltZSB0aGUgU1cgaXMgaW5zdGFsbGVkLFxuICAgICAgICAvLyBhbmQgdGhlcmUncyBubyBuZWVkIHRvIHByb21wdCBmb3IgYSByZWxvYWQgYXQgdGhhdCBwb2ludC5cbiAgICAgICAgLy8gU28gY2hlY2sgaGVyZSB0byBzZWUgaWYgdGhlIHBhZ2UgaXMgYWxyZWFkeSBjb250cm9sbGVkLFxuICAgICAgICAvLyBpLmUuIHdoZXRoZXIgdGhlcmUncyBhbiBleGlzdGluZyBzZXJ2aWNlIHdvcmtlci5cbiAgICAgICAgaWYgKG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAvLyBUaGUgdXBkYXRlZm91bmQgZXZlbnQgaW1wbGllcyB0aGF0IHJlZ2lzdHJhdGlvbi5pbnN0YWxsaW5nIGlzIHNldDpcbiAgICAgICAgICAvLyBodHRwczovL3NsaWdodGx5b2ZmLmdpdGh1Yi5pby9TZXJ2aWNlV29ya2VyL3NwZWMvc2VydmljZV93b3JrZXIvaW5kZXguaHRtbFxuICAgICAgICAgIHZhciBpbnN0YWxsaW5nV29ya2VyID0gcmVnaXN0cmF0aW9uLmluc3RhbGxpbmc7XG5cbiAgICAgICAgICBpbnN0YWxsaW5nV29ya2VyLm9uc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoaW5zdGFsbGluZ1dvcmtlci5zdGF0ZSkge1xuICAgICAgICAgICAgICBjYXNlICdpbnN0YWxsZWQnOlxuICAgICAgICAgICAgICAgIC8vIEF0IHRoaXMgcG9pbnQsIHRoZSBvbGQgY29udGVudCB3aWxsIGhhdmUgYmVlbiBwdXJnZWQgYW5kIHRoZVxuICAgICAgICAgICAgICAgIC8vIGZyZXNoIGNvbnRlbnQgd2lsbCBoYXZlIGJlZW4gYWRkZWQgdG8gdGhlIGNhY2hlLlxuICAgICAgICAgICAgICAgIC8vIEl0J3MgdGhlIHBlcmZlY3QgdGltZSB0byBkaXNwbGF5IGEgXCJOZXcgY29udGVudCBpc1xuICAgICAgICAgICAgICAgIC8vIGF2YWlsYWJsZTsgcGxlYXNlIHJlZnJlc2guXCIgbWVzc2FnZSBpbiB0aGUgcGFnZSdzIGludGVyZmFjZS5cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlICdyZWR1bmRhbnQnOlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGluc3RhbGxpbmcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzZXJ2aWNlIHdvcmtlciBiZWNhbWUgcmVkdW5kYW50LicpO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgLy8gSWdub3JlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkdXJpbmcgc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uOicsIGUpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICpcbiAgKlxuICAqXG4gICogQ3VzdG9tIEphdmFTY3JpcHRcbiAgKlxuICAqXG4gICpcbiAgKiovXG5cbiAgdmFyIFBPUlRGT0xJT19JVEVNUyA9IFtcbiAgICB7XG4gICAgICBuYW1lOiAndGVzdCcsXG4gICAgICBwcmV2aWV3VGV4dDogJ0VsaXQgZnJpbmdpbGxhIHJ1dHJ1bS4gQWVuZWFuIHNvbGxpY2l0dWRpbiwgZXJhdCBhIGVsZW1lbnR1bSBydXRydW0sIG5lcXVlIHNlbSBwcmV0aXVtIG1ldHVzLCBxdWlzIG1vbGxpcyBuaXNsIG51bmMgZXQgbWFzc2EuIFZlc3RpYnVsdW0gc2VkIG1ldHVzIGluIGxvcmVtIHRyaXN0aXF1ZSB1bGxhbWNvcnBlciBpZCB2aXRhZSBlcmF0LicsXG4gICAgICBwcmV2aWV3SW1hZ2U6ICcuL2ltYWdlcy9wb3J0Zm9saW9faXRlbXMvMS5qcGcnLFxuICAgICAgZGVzY3JpcHRpb246ICdkZXNjcmlwdGlvbicsXG4gICAgICBpbWFnZXM6IFsnLi9pbWFnZXMvcG9ydGZvbGlvX2l0ZW1zLzEuanBnJ10sXG4gICAgICB0b29sczogWydza2V0Y2gnLCAnbWFpbGluZ0h0bWwnLCAnc3BvdGlmeSddLFxuICAgICAgbGl2ZUF0OiAnZ29vZ2xlLmNvbSdcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICd0ZXN0IDInLFxuICAgICAgcHJldmlld1RleHQ6ICdWZXN0aWJ1bHVtIHNlZCBtZXR1cyBpbiBsb3JlbSB0cmlzdGlxdWUgdWxsYW1jb3JwZXIgaWQgdml0YWUgZXJhdC4nLFxuICAgICAgcHJldmlld0ltYWdlOiAnLi9pbWFnZXMvcG9ydGZvbGlvX2l0ZW1zLzIuanBnJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnZGVzY3JpcHRpb24gMicsXG4gICAgICBpbWFnZXM6IFsnLi9pbWFnZXMvcG9ydGZvbGlvX2l0ZW1zLzIuanBnJywgJy4vaW1hZ2VzL3BvcnRmb2xpb19pdGVtcy8xLmpwZyddLFxuICAgICAgdG9vbHM6IFsnc2tldGNoJywgJ21haWxpbmdIdG1sJ10sXG4gICAgICBsaXZlQXQ6ICdmYWNlYm9vay5jb20nXG4gICAgfVxuICBdO1xuXG4gIHZhciBUT09MUyA9IHtcbiAgICBza2V0Y2g6IHtcbiAgICAgIG5hbWU6ICdTa2V0Y2gnLFxuICAgICAgaWNvbjogJy4vaW1hZ2VzL3Rvb2wtc2tldGNoLnBuZydcbiAgICB9LFxuICAgIG1haWxpbmdIdG1sOiB7XG4gICAgICBuYW1lOiAnRS1tYWlsaW5nIEhUTUwnLFxuICAgICAgaWNvbjogJy4vaW1hZ2VzL3Rvb2wtdGVtcGxhdGUucG5nJ1xuICAgIH0sXG4gICAgc3BvdGlmeToge1xuICAgICAgbmFtZTogJ1Nwb3RpZnknLFxuICAgICAgaWNvbjogJy4vaW1hZ2VzL3Rvb2wtc3BvdGlmeS5wbmcnXG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAqIEdldHMgY29udGFjdCBmb3JtIGlucHV0IHZhbHVlc1xuICAqIEByZXR1cm4ge29iamVjdH0gc2V0IG9mIGlucHV0cyAtPiBvYmplY3RbaW5wdXRfbmFtZV0gPSBpbnB1dF92YWx1ZVxuICAqL1xuICBmdW5jdGlvbiBnZXRGb3JtRGF0YSgpIHtcbiAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWN0X2Zvcm0nKTtcbiAgICAvLyBnZXQgZm9ybSBpbnB1dHMgZGF0YVxuICAgIHZhciBkYXRhID0ge307XG4gICAgT2JqZWN0LmtleXMoZm9ybS5lbGVtZW50cykubWFwKGZ1bmN0aW9uKGtleSkge1xuICAgICAgaWYgKGlzTmFOKGtleSkpIHtcbiAgICAgICAgZGF0YVtrZXldID0gZm9ybS5lbGVtZW50c1trZXldLnZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgLyoqXG4gICogRW1haWwgdmFsaWRhdGlvbiByZWdleHBcbiAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWwgZm9yIHZhbGlkYXRpb25cbiAgKiBAcmV0dXJuIHtib29sZWFufSBlbWFpbCB2YWxpZGF0aW9uIHJlc3VsdFxuICAqL1xuICBmdW5jdGlvbiBlbWFpbFZhbGlkKGVtYWlsKSB7XG4gICAgdmFyIHJlID0gL14oW1xcdy1dKyg/OlxcLltcXHctXSspKilAKCg/OltcXHctXStcXC4pKlxcd1tcXHctXXswLDY2fSlcXC4oW2Etel17Miw2fSg/OlxcLlthLXpdezJ9KT8pJC9pO1xuICAgIHJldHVybiAhcmUudGVzdChlbWFpbCk7XG4gIH1cblxuICAvKipcbiAgKiBGb3JtIHN0YXRlIC0gbG9hZGluZ1xuICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCBET00gZm9ybSBldmVudFxuICAqIEByZXR1cm4ge2Jvb2xlYW59IGlzIGxvYWRpbmc/IHRydWVcbiAgKi9cbiAgZnVuY3Rpb24gZm9ybUxvYWRpbmcoZXZlbnQpIHtcbiAgICAvLyBtYWtlIHZpc3VhbCBjaGFuZ2UgZm9yIGxvYWRpbmcgc3RhdGVcbiAgICBldmVudC50YXJnZXQuY2hpbGRyZW4uY29udGFjdF9mb3JtX19zdWJtaXQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIGV2ZW50LnRhcmdldC5jaGlsZHJlbi5jb250YWN0X2Zvcm1fX3N1Ym1pdC5pbm5lckhUTUwgPSAnV3lzecWCYW5pZS4uLic7XG4gICAgZXZlbnQudGFyZ2V0LmNoaWxkcmVuLmNvbnRhY3RfZm9ybV9fc3VibWl0LmNsYXNzTmFtZSArPSAnIGJ1dHRvbi0tbG9hZGluZyc7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm1fX2Vycm9yJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAqIEZvcm0gbG9hZGluZyBzdGF0ZSAtIHJlc2V0XG4gICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IERPTSBmb3JtIGV2ZW50XG4gICogQHJldHVybiB7Ym9vbGVhbn0gaXMgbG9hZGluZz8gZmFsc2VcbiAgKi9cbiAgZnVuY3Rpb24gZm9ybUxvYWRpbmdSZXNldChldmVudCkge1xuICAgIC8vIG1ha2UgdmlzdWFsIGNoYW5nZSBmb3IgbG9hZGluZyBzdGF0ZVxuICAgIGV2ZW50LnRhcmdldC5jaGlsZHJlbi5jb250YWN0X2Zvcm1fX3N1Ym1pdC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGV2ZW50LnRhcmdldC5jaGlsZHJlbi5jb250YWN0X2Zvcm1fX3N1Ym1pdC5pbm5lckhUTUwgPSAnV3nFm2xpaic7XG4gICAgZXZlbnQudGFyZ2V0LmNoaWxkcmVuLmNvbnRhY3RfZm9ybV9fc3VibWl0LmNsYXNzTmFtZSA9ICdidXR0b24gYnV0dG9uLS1wcmltYXJ5JztcblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgKiBEZXRlY3RzIGVtcHR5IGlucHV0cyBpbiBmb3JtXG4gICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IERPTSBmb3JtIGV2ZW50XG4gICogQHJldHVybiB7Ym9vbGVhbn0gZXZlcnkgZm9ybSBpbnB1dHMgZmlsbGVkP1xuICAqL1xuICBmdW5jdGlvbiBpbnB1dHNGaWxsZWQoZXZlbnQpIHtcbiAgICB2YXIgZmlsbGVkID0gdHJ1ZTtcbiAgICBpZiAoZXZlbnQudGFyZ2V0Lm1lc3NhZ2UudmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICBmaWxsZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGV2ZW50LnRhcmdldC5uYW1lLnZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZmlsbGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChldmVudC50YXJnZXQuZW1haWwudmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICBmaWxsZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmlsbGVkO1xuICB9XG5cbiAgLyoqXG4gICogU2VuZCBmb3JtIGRhdGFcbiAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgRE9NIGV2ZW50XG4gICovXG4gIGZ1bmN0aW9uIGhhbmRsZUZvcm1TdWJtaXQoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBkYXRhID0gZ2V0Rm9ybURhdGEoKTtcbiAgICB2YXIgaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgdmFyIGFsbElucHV0c0ZpbGxlZCA9IGlucHV0c0ZpbGxlZChldmVudCk7XG5cbiAgICAvLyBWQUxJREFUSU9OXG4gICAgaWYgKGlzTG9hZGluZyB8fCAhYWxsSW5wdXRzRmlsbGVkKSB7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybV9fZXJyb3InKS5pbm5lckhUTUwgPSAnVXp1cGXFgm5paiB3c3p5c3RraWUgcG9sYSBmb3JtdWxhcnphJztcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtX19lcnJvcicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH0gZWxzZSBpZiAoZW1haWxWYWxpZChkYXRhLmVtYWlsKSkge1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm1fX2Vycm9yJykuaW5uZXJIVE1MID0gJ1dwaXN6IHByYXdpZMWCb3d5IGFkcmVzIGUtbWFpbCc7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybV9fZXJyb3InKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVkFMSURBVElPTiBQQVNTRURcbiAgICAgIGlzTG9hZGluZyA9IGZvcm1Mb2FkaW5nKGV2ZW50KTtcbiAgICAgIHZhciB1cmwgPSBldmVudC50YXJnZXQuYWN0aW9uO1xuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgeGhyLm9wZW4oJ1BPU1QnLCB1cmwpO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKTtcbiAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaXNMb2FkaW5nID0gZm9ybUxvYWRpbmdSZXNldChldmVudCk7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFjdF9mb3JtJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhhbmt5b3VfbWVzc2FnZScpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtX19lcnJvcicpLmlubmVySFRNTCA9ICdDb8WbIHBvc3rFgm8gbmllIHRhayA6KCA8YnIgLz4gV3nFm2xpaiBwcm9zesSZIGUtbWFpbCBuYSBhZHJlczogPGEgaHJlZj1cIm1haWx0bzp3YXNrb3dza2kubWlrb2xhakBnbWFpbC5jb21cIj53YXNrb3dza2kubWlrb2xhakBnbWFpbC5jb208L2E+LiA8YnIgLz4gRHppxJlrdWrEmSEnO1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtX19lcnJvcicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgLy8gdXJsIGVuY29kZSBmb3JtIGRhdGEgZm9yIHNlbmRpbmcgYXMgcG9zdCBkYXRhXG4gICAgICB2YXIgZW5jb2RlZCA9IE9iamVjdC5rZXlzKGRhdGEpLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFba2V5XSk7XG4gICAgICB9KS5qb2luKCcmJyk7XG5cbiAgICAgIHhoci5zZW5kKGVuY29kZWQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAqIEFjdGl2YXRpbmcgb3ZlcmxheSBtZW51XG4gICovXG4gIGZ1bmN0aW9uIG1lbnVUcmlnZ2VyKCkge1xuICAgIHZhciBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ292ZXJsYXknKTtcbiAgICBvdmVybGF5LmNsYXNzTGlzdC50b2dnbGUoJ21lbnUtb3ZlcmxheS0tb3BlbicpO1xuICB9XG5cbiAgLyoqXG4gICogQ2hlY2sgdGhhdCBtZW51IGlzIG9wZW5lZCAob3ZlcmxheSBpcyBhY3RpdmUpXG4gICogQHJldHVybiB7Ym9vbGVhbn0gTWVudSBhY3RpdmU/XG4gICovXG4gIGZ1bmN0aW9uIG92ZXJsYXlBY3RpdmUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdmVybGF5JykuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZW51LW92ZXJsYXktLW9wZW4nKTtcbiAgfVxuXG4gIC8qKlxuICAqIFNjcm9sbHMgdG8gZWxlbWVudCwgY2xvc2luZyBtZW51IG92ZXJsYXkgaWYgbmVlZGVkXG4gICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IERPTSBldmVudFxuICAqL1xuICBmdW5jdGlvbiBzY3JvbGxUbyhldmVudCkge1xuICAgIC8vIGdvdG8gc2VjdGlvbiBtYXJrZWQgYXMgYnV0dG9uIGRhdGEtZ290byBhdHRyaWJ1dGVcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWdvdG8nKSkuc2Nyb2xsSW50b1ZpZXcoe1xuICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgfSk7XG4gICAgLy8gbmVlZCB0byBjbG9zZSBtZW51IG92ZXJsYXk/XG4gICAgaWYgKG92ZXJsYXlBY3RpdmUoKSkge1xuICAgICAgbWVudVRyaWdnZXIoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgKiBGaWxsIHBvcnRmb2xpbyB3aXRoIFBvcnRmb2xpb19pdGVtc1xuICAqIEBwYXJhbSB7QXJyYXl9IGl0ZW1zIC0gYXJyYXkgb2YgcG9ydGZvbGlvIGl0ZW1zXG4gICovXG4gIGZ1bmN0aW9uIGluc2VydFBvcnRvZmxpb0l0ZW1zKGl0ZW1zKSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3J0Zm9saW9faXRlbXNfY29udGFpbmVyJyk7XG4gICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50LCBpbmRleCkge1xuICAgICAgLy8gY3JlYXRlIG1haW4gY29udGFpbmVyXG4gICAgICB2YXIgc2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlY3Rpb24nKTtcbiAgICAgIHNlY3Rpb24uY2xhc3NOYW1lICs9ICcgY29udGFpbmVyIHNlY3Rpb24gc2VjdGlvbi0tbGVmdCBzZWN0aW9uLS1wb3J0Zm9saW8taXRlbSAnO1xuICAgICAgLy8gY3JlYXRlIGJveCBmb3IgaXRlbSBwcmV2aWV3XG4gICAgICB2YXIgc2VjdGlvbk1lZGlhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBzZWN0aW9uTWVkaWEuY2xhc3NOYW1lICs9ICcgc2VjdGlvbl9fbWVkaWEgc2VjdGlvbl9fbWVkaWEtLXBvcnRmb2xpby1pdGVtICc7XG4gICAgICBzZWN0aW9uTWVkaWEuaW5uZXJIVE1MID0gJzxpbWcgc3JjPVwiJyArIGVsZW1lbnQucHJldmlld0ltYWdlICsgJ1wiIGFsdD1cInBvcnRmb2xpb19pdGVtXCIgY2xhc3M9XCJidXR0b24tLXNob3ctbW9yZVwiIGRhdGEtaXRlbWlkPVwiJyArIGluZGV4ICsgJ1wiIC8+JztcbiAgICAgIC8vIGNyZWF0ZSBib3ggZm9yIGl0ZW0gbmFtZSBhbmQgZGVzY3JpcHRpb25cbiAgICAgIHZhciBzZWN0aW9uVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgc2VjdGlvblRleHQuY2xhc3NOYW1lICs9ICcgc2VjdGlvbl9fdGV4dCBzZWN0aW9uX190ZXh0LS1wb3J0Zm9saW8taXRlbSAnO1xuICAgICAgc2VjdGlvblRleHQuaW5uZXJIVE1MID0gJzxoMyBjbGFzcz1cInNlY3Rpb25fX3RpdGxlXCI+JyArIGVsZW1lbnQubmFtZSArICc8L2gzPic7XG4gICAgICBzZWN0aW9uVGV4dC5pbm5lckhUTUwgKz0gJzxwPicgKyBlbGVtZW50LnByZXZpZXdUZXh0ICsgJzwvcD4nO1xuICAgICAgc2VjdGlvblRleHQuaW5uZXJIVE1MICs9ICc8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGJ1dHRvbi0tdGV4dCBidXR0b24tLWdyZWVuIGJ1dHRvbi0tc2hvdy1tb3JlXCIgZGF0YS1pdGVtaWQ9XCInICsgaW5kZXggKyAnXCI+PGltZyBzcmM9XCIuL2ltYWdlcy9pY29uLWluZm8uc3ZnXCIgYWx0PVwiXCIgY2xhc3M9XCJidXR0b25fX2ljb24tLWxlZnRcIiAvPiBab2JhY3ogc3pjemVnw7PFgnk8L2J1dHRvbj4nO1xuICAgICAgc2VjdGlvbi5hcHBlbmRDaGlsZChzZWN0aW9uTWVkaWEpO1xuICAgICAgc2VjdGlvbi5hcHBlbmRDaGlsZChzZWN0aW9uVGV4dCk7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc2VjdGlvbik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgKiBGaWxsIHBvcnRmb2xpbyBpdGVtIGRlc2NyaXB0aW9uIHdpdGggZGF0YVxuICAqIEBwYXJhbSB7TnVtYmVyfSBpdGVtSWQgLSBpZCBvZiBwb3J0Zm9saW8gaXRlbVxuICAqL1xuICBmdW5jdGlvbiBmaWxsUG9ydGZvbGlvSXRlbURlc2NyaXB0aW9uKGl0ZW1JZCkge1xuICAgIHZhciBpdGVtTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3J0Zm9saW9fX2l0ZW0tbmFtZScpO1xuICAgIHZhciBpdGVtRGVzY3JwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3J0Zm9saW9fX2l0ZW0tZGVzY3JpcHRpb24nKTtcbiAgICB2YXIgaW1hZ2VzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcnRmb2xpb19faW1hZ2VzJyk7XG4gICAgdmFyIHRvb2xzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvb2xzJyk7XG4gICAgdmFyIGxpdmVBdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3J0Zm9saW9fX2xpdmUtYXQnKTtcbiAgICB2YXIgZXh0ZXJuYWxMaW5rQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi0tbGl2ZS1hdCcpO1xuXG4gICAgaXRlbU5hbWUuaW5uZXJIVE1MID0gUE9SVEZPTElPX0lURU1TW2l0ZW1JZF0ubmFtZTtcbiAgICBpdGVtRGVzY3JwdGlvbi5pbm5lckhUTUwgPSBQT1JURk9MSU9fSVRFTVNbaXRlbUlkXS5kZXNjcmlwdGlvbjtcbiAgICAvLyBjbGVhciBpbWFnZXMgY29udGFpbmVyIGZyb20gb2xkIGltYWdlc1xuICAgIGltYWdlc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAvLyBmaWxsIGltYWdlcyBjb250YWluZXIgd2l0aCBuZXcgaW1hZ2VzXG4gICAgUE9SVEZPTElPX0lURU1TW2l0ZW1JZF0uaW1hZ2VzLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCwgaW5kZXgpIHtcbiAgICAgIGltYWdlc0NvbnRhaW5lci5pbm5lckhUTUwgKz0gJzxpbWcgc3JjPVwiJyArIGVsZW1lbnQgKyAnXCIgYWx0PVwiJyArIFBPUlRGT0xJT19JVEVNU1tpdGVtSWRdLm5hbWUgKyAnIC0gIycgKyBpbmRleCArICcgcHJlc2VudGF0aW9uIGltYWdlXCIgY2xhc3M9XCJwb3J0Zm9saW9fX2ltYWdlXCIgLz4gJztcbiAgICB9KTtcbiAgICB0b29sc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICBQT1JURk9MSU9fSVRFTVNbaXRlbUlkXS50b29scy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgIHRvb2xzQ29udGFpbmVyLmlubmVySFRNTCArPSAnPGRpdiBjbGFzcz1cInRvb2xzX2l0ZW1cIj48aW1nIHNyYz1cIicgKyBUT09MU1tlbGVtZW50XS5pY29uICsgJ1wiIGFsdD1cIlwiIGNsYXNzPVwiXCI+PHA+JyArIFRPT0xTW2VsZW1lbnRdLm5hbWUgKyAnPC9wPjwvZGl2Pic7XG4gICAgfSk7XG4gICAgbGl2ZUF0LmlubmVySFRNTCA9ICc8cD4nICsgUE9SVEZPTElPX0lURU1TW2l0ZW1JZF0ubGl2ZUF0ICsgJzwvcD4nO1xuICAgIGV4dGVybmFsTGlua0J1dHRvbi5ocmVmID0gJy8vJyArIFBPUlRGT0xJT19JVEVNU1tpdGVtSWRdLmxpdmVBdDtcbiAgfVxuXG4gIC8qKlxuICAqIE1ha2UgcG9ydGZvbGlvIGl0ZW0gYWxpdmVcbiAgKiovXG4gIGZ1bmN0aW9uIHZpZXdDaGFuZ2VyKCkge1xuICAgIHZhciB2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZXcnKTtcbiAgICB2YXIgYmFja0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idXR0b24tLWJhY2snKTtcbiAgICB2YXIgbGlzdEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJ1dHRvbi0tc2hvdy1tb3JlJyk7XG4gICAgdmFyIHBvcnRmb2xpb0Rlc2NyaXB0aW9uVmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY3JlZW4tLXBvcnRmb2xpby1pdGVtJyk7XG5cbiAgICAvKipcbiAgICAqIFdoaWxlIGNsaWNraW5nIFwiU2hvdyBtb3JlXCIsIGFjdGl2YXRlIGRlc2NyaXB0aW9uIHZpZXcgYW5kIGZpbGwgaXQgd2l0aCBkYXRhXG4gICAgKiBAcGFyYW0ge09iamVjdH0gZXZ0IC0gYnV0dG9uIGNsaWNrIGV2ZW50XG4gICAgKiovXG4gICAgZnVuY3Rpb24gb25WaWV3Q2hhbmdlKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAvLyBjaGFuZ2UgZGV0YWlscyBkYXRhXG4gICAgICBpZiAoZXZ0LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdidXR0b24tLXNob3ctbW9yZScpKSB7XG4gICAgICAgIHZhciBwb3J0Zm9saW9JdGVtSWQgPSBldnQuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaXRlbWlkJyk7XG4gICAgICAgIGZpbGxQb3J0Zm9saW9JdGVtRGVzY3JpcHRpb24ocG9ydGZvbGlvSXRlbUlkKTtcbiAgICAgIH1cbiAgICAgIC8vIGNoYW5nZSB2aWV3IC0gYWRkIFwiYWN0aXZlXCIgY2xhc3MgdG8gbWFpbiB2aWV3IGNvbnRhaW5lclxuICAgICAgdmlldy5jbGFzc0xpc3QudG9nZ2xlKCd2aWV3LS1jaGFuZ2UnKTtcbiAgICAgIC8vIGdvIHRvIHRoZSB0b3Agb2YgcG9ydGZvbGlvIGl0ZW0gZGVzY3JpcHRpb24gY29udGFpbmVyIHdoaWxlIFwic2hvdyBtb3JlXCIgZXZlbnRcbiAgICAgIGlmICh2aWV3LmNsYXNzTGlzdC5jb250YWlucygndmlldy0tY2hhbmdlJykpIHtcbiAgICAgICAgcG9ydGZvbGlvRGVzY3JpcHRpb25WaWV3LnNjcm9sbFRvcCA9IDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBsaXN0SXRlbXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIGxpc3RJdGVtc1tqXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uVmlld0NoYW5nZSwgZmFsc2UpO1xuICAgIH1cbiAgICBmb3IgKHZhciBrID0gMDsgayA8IGJhY2tCdXR0b24ubGVuZ3RoOyBrKyspIHtcbiAgICAgIGJhY2tCdXR0b25ba10uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblZpZXdDaGFuZ2UsIGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgKiBSdW5zIHdoaWxlIGRvY3VtZW50IGlzIGxvYWRlZC4uLlxuICAqL1xuICBmdW5jdGlvbiBsb2FkZWQoKSB7XG4gICAgLy8gcHJldmVudCBkZWZhdWx0IHN1Ym1pdCBmb3JtIGFjdGlvbiwgcmVkaXJlY3QgdG8gaGFuZGxlRm9ybVN1Ym1pdCgpXG4gICAgdmFyIGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFjdF9mb3JtJyk7XG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVGb3JtU3VibWl0LCBmYWxzZSk7XG4gICAgY29uc29sZS5sb2coJ0luZm86IGZvcm0gc3VibWl0IGZ1bmN0aW9uIGxvYWRlZCcpO1xuXG4gICAgLy8gbWFrZSBpbnRlcm5hbCBidXR0b25zIGFsaXZlXG4gICAgdmFyIG1lbnVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudS1idXR0b24nKTtcbiAgICBtZW51QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbWVudVRyaWdnZXIsIGZhbHNlKTtcbiAgICB2YXIgbWVudUJ0bkNsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUtYnV0dG9uLWNsb3NlJyk7XG4gICAgbWVudUJ0bkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbWVudVRyaWdnZXIsIGZhbHNlKTtcbiAgICB2YXIgbWVudUxpbmtzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnaW50ZXJuYWwtbGluaycpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVudUxpbmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBtZW51TGlua3NbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzY3JvbGxUbywgZmFsc2UpO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygnSW5mbzogbWVudSB0cmlnZ2VyIGZ1bmN0aW9ucyBsb2FkZWQnKTtcblxuICAgIC8vIGNyZWF0ZSBwb3J0Zm9saW8gaXRlbXNcbiAgICBpbnNlcnRQb3J0b2ZsaW9JdGVtcyhQT1JURk9MSU9fSVRFTVMpO1xuXG4gICAgLy8gbWFrZSBwb3J0b2ZsaW8gaXRlbSBhbGl2ZVxuICAgIHZpZXdDaGFuZ2VyKCk7XG4gIH1cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGxvYWRlZCwgZmFsc2UpO1xufSkoKTtcbiJdfQ==\n","/*!\n *\n *  Web Starter Kit\n *  Copyright 2015 Google Inc. All rights reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    https://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License\n *\n */\n/* eslint-env browser */\n(function() {\n  'use strict';\n\n  // Check to make sure service workers are supported in the current browser,\n  // and that the current page is accessed from a secure origin. Using a\n  // service worker from an insecure origin will trigger JS console errors. See\n  // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n  var isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n      // [::1] is the IPv6 localhost address.\n      window.location.hostname === '[::1]' ||\n      // 127.0.0.1/8 is considered localhost for IPv4.\n      window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n      )\n    );\n\n  if ('serviceWorker' in navigator &&\n      (window.location.protocol === 'https:' || isLocalhost)) {\n    navigator.serviceWorker.register('service-worker.js')\n    .then(function(registration) {\n      // updatefound is fired if service-worker.js changes.\n      registration.onupdatefound = function() {\n        // updatefound is also fired the very first time the SW is installed,\n        // and there's no need to prompt for a reload at that point.\n        // So check here to see if the page is already controlled,\n        // i.e. whether there's an existing service worker.\n        if (navigator.serviceWorker.controller) {\n          // The updatefound event implies that registration.installing is set:\n          // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html\n          var installingWorker = registration.installing;\n\n          installingWorker.onstatechange = function() {\n            switch (installingWorker.state) {\n              case 'installed':\n                // At this point, the old content will have been purged and the\n                // fresh content will have been added to the cache.\n                // It's the perfect time to display a \"New content is\n                // available; please refresh.\" message in the page's interface.\n                break;\n\n              case 'redundant':\n                throw new Error('The installing ' +\n                                'service worker became redundant.');\n\n              default:\n                // Ignore\n            }\n          };\n        }\n      };\n    }).catch(function(e) {\n      console.error('Error during service worker registration:', e);\n    });\n  }\n\n  /**\n  *\n  *\n  *\n  * Custom JavaScript\n  *\n  *\n  *\n  **/\n\n  var PORTFOLIO_ITEMS = [\n    {\n      name: 'test',\n      previewText: 'Elit fringilla rutrum. Aenean sollicitudin, erat a elementum rutrum, neque sem pretium metus, quis mollis nisl nunc et massa. Vestibulum sed metus in lorem tristique ullamcorper id vitae erat.',\n      previewImage: './images/portfolio_items/1.jpg',\n      description: 'description',\n      images: ['./images/portfolio_items/1.jpg'],\n      tools: ['sketch', 'mailingHtml', 'spotify'],\n      liveAt: 'google.com'\n    },\n    {\n      name: 'test 2',\n      previewText: 'Vestibulum sed metus in lorem tristique ullamcorper id vitae erat.',\n      previewImage: './images/portfolio_items/2.jpg',\n      description: 'description 2',\n      images: ['./images/portfolio_items/2.jpg', './images/portfolio_items/1.jpg'],\n      tools: ['sketch', 'mailingHtml'],\n      liveAt: 'facebook.com'\n    }\n  ];\n\n  var TOOLS = {\n    sketch: {\n      name: 'Sketch',\n      icon: './images/tool-sketch.png'\n    },\n    mailingHtml: {\n      name: 'E-mailing HTML',\n      icon: './images/tool-template.png'\n    },\n    spotify: {\n      name: 'Spotify',\n      icon: './images/tool-spotify.png'\n    }\n  };\n\n  /**\n  * Gets contact form input values\n  * @return {object} set of inputs -> object[input_name] = input_value\n  */\n  function getFormData() {\n    var form = document.getElementById('contact_form');\n    // get form inputs data\n    var data = {};\n    Object.keys(form.elements).map(function(key) {\n      if (isNaN(key)) {\n        data[key] = form.elements[key].value;\n      }\n    });\n    return data;\n  }\n\n  /**\n  * Email validation regexp\n  * @param {string} email for validation\n  * @return {boolean} email validation result\n  */\n  function emailValid(email) {\n    var re = /^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i;\n    return !re.test(email);\n  }\n\n  /**\n  * Form state - loading\n  * @param {Object} event DOM form event\n  * @return {boolean} is loading? true\n  */\n  function formLoading(event) {\n    // make visual change for loading state\n    event.target.children.contact_form__submit.disabled = true;\n    event.target.children.contact_form__submit.innerHTML = 'Wysyłanie...';\n    event.target.children.contact_form__submit.className += ' button--loading';\n    document.getElementById('form__error').style.display = 'none';\n\n    return true;\n  }\n  /**\n  * Form loading state - reset\n  * @param {Object} event DOM form event\n  * @return {boolean} is loading? false\n  */\n  function formLoadingReset(event) {\n    // make visual change for loading state\n    event.target.children.contact_form__submit.disabled = false;\n    event.target.children.contact_form__submit.innerHTML = 'Wyślij';\n    event.target.children.contact_form__submit.className = 'button button--primary';\n\n    return false;\n  }\n  /**\n  * Detects empty inputs in form\n  * @param {Object} event DOM form event\n  * @return {boolean} every form inputs filled?\n  */\n  function inputsFilled(event) {\n    var filled = true;\n    if (event.target.message.value.length === 0) {\n      filled = false;\n    }\n    if (event.target.name.value.length === 0) {\n      filled = false;\n    }\n    if (event.target.email.value.length === 0) {\n      filled = false;\n    }\n\n    return filled;\n  }\n\n  /**\n  * Send form data\n  * @param {Object} event DOM event\n  */\n  function handleFormSubmit(event) {\n    event.preventDefault();\n    var data = getFormData();\n    var isLoading = false;\n    var allInputsFilled = inputsFilled(event);\n\n    // VALIDATION\n    if (isLoading || !allInputsFilled) {\n      document.getElementById('form__error').innerHTML = 'Uzupełnij wszystkie pola formularza';\n      document.getElementById('form__error').style.display = 'block';\n    } else if (emailValid(data.email)) {\n      document.getElementById('form__error').innerHTML = 'Wpisz prawidłowy adres e-mail';\n      document.getElementById('form__error').style.display = 'block';\n    } else {\n      // VALIDATION PASSED\n      isLoading = formLoading(event);\n      var url = event.target.action;\n      var xhr = new XMLHttpRequest();\n      xhr.open('POST', url);\n      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n      xhr.onreadystatechange = function() {\n        isLoading = formLoadingReset(event);\n        if (xhr.status === 200) {\n          document.getElementById('contact_form').style.display = 'none';\n          document.getElementById('thankyou_message').style.display = 'block';\n        } else {\n          document.getElementById('form__error').innerHTML = 'Coś poszło nie tak :( <br /> Wyślij proszę e-mail na adres: <a href=\"mailto:waskowski.mikolaj@gmail.com\">waskowski.mikolaj@gmail.com</a>. <br /> Dziękuję!';\n          document.getElementById('form__error').style.display = 'block';\n          console.log(xhr.responseText);\n        }\n      };\n      // url encode form data for sending as post data\n      var encoded = Object.keys(data).map(function(key) {\n        return encodeURIComponent(key) + '=' + encodeURIComponent(data[key]);\n      }).join('&');\n\n      xhr.send(encoded);\n    }\n  }\n\n  /**\n  * Activating overlay menu\n  */\n  function menuTrigger() {\n    var overlay = document.getElementById('overlay');\n    overlay.classList.toggle('menu-overlay--open');\n  }\n\n  /**\n  * Check that menu is opened (overlay is active)\n  * @return {boolean} Menu active?\n  */\n  function overlayActive() {\n    return document.getElementById('overlay').classList.contains('menu-overlay--open');\n  }\n\n  /**\n  * Scrolls to element, closing menu overlay if needed\n  * @param {Object} event DOM event\n  */\n  function scrollTo(event) {\n    // goto section marked as button data-goto attribute\n    document.getElementById(event.target.getAttribute('data-goto')).scrollIntoView({\n      behavior: 'smooth'\n    });\n    // need to close menu overlay?\n    if (overlayActive()) {\n      menuTrigger();\n    }\n  }\n\n  /**\n  * Fill portfolio with Portfolio_items\n  * @param {Array} items - array of portfolio items\n  */\n  function insertPortoflioItems(items) {\n    var container = document.getElementById('portfolio_items_container');\n    items.forEach(function(element, index) {\n      // create main container\n      var section = document.createElement('section');\n      section.className += ' container section section--left section--portfolio-item ';\n      // create box for item preview\n      var sectionMedia = document.createElement('div');\n      sectionMedia.className += ' section__media section__media--portfolio-item ';\n      sectionMedia.innerHTML = '<img src=\"' + element.previewImage + '\" alt=\"portfolio_item\" class=\"button--show-more\" data-itemid=\"' + index + '\" />';\n      // create box for item name and description\n      var sectionText = document.createElement('div');\n      sectionText.className += ' section__text section__text--portfolio-item ';\n      sectionText.innerHTML = '<h3 class=\"section__title\">' + element.name + '</h3>';\n      sectionText.innerHTML += '<p>' + element.previewText + '</p>';\n      sectionText.innerHTML += '<button class=\"button button--text button--green button--show-more\" data-itemid=\"' + index + '\"><img src=\"./images/icon-info.svg\" alt=\"\" class=\"button__icon--left\" /> Zobacz szczegóły</button>';\n      section.appendChild(sectionMedia);\n      section.appendChild(sectionText);\n      container.appendChild(section);\n    });\n  }\n\n  /**\n  * Fill portfolio item description with data\n  * @param {Number} itemId - id of portfolio item\n  */\n  function fillPortfolioItemDescription(itemId) {\n    var itemName = document.querySelector('.portfolio__item-name');\n    var itemDescrption = document.querySelector('.portfolio__item-description');\n    var imagesContainer = document.querySelector('.portfolio__images');\n    var toolsContainer = document.querySelector('.tools');\n    var liveAt = document.querySelector('.portfolio__live-at');\n    var externalLinkButton = document.querySelector('.button--live-at');\n\n    itemName.innerHTML = PORTFOLIO_ITEMS[itemId].name;\n    itemDescrption.innerHTML = PORTFOLIO_ITEMS[itemId].description;\n    // clear images container from old images\n    imagesContainer.innerHTML = '';\n    // fill images container with new images\n    PORTFOLIO_ITEMS[itemId].images.forEach(function(element, index) {\n      imagesContainer.innerHTML += '<img src=\"' + element + '\" alt=\"' + PORTFOLIO_ITEMS[itemId].name + ' - #' + index + ' presentation image\" class=\"portfolio__image\" /> ';\n    });\n    toolsContainer.innerHTML = '';\n    PORTFOLIO_ITEMS[itemId].tools.forEach(function(element) {\n      toolsContainer.innerHTML += '<div class=\"tools_item\"><img src=\"' + TOOLS[element].icon + '\" alt=\"\" class=\"\"><p>' + TOOLS[element].name + '</p></div>';\n    });\n    liveAt.innerHTML = '<p>' + PORTFOLIO_ITEMS[itemId].liveAt + '</p>';\n    externalLinkButton.href = '//' + PORTFOLIO_ITEMS[itemId].liveAt;\n  }\n\n  /**\n  * Make portfolio item alive\n  **/\n  function viewChanger() {\n    var view = document.querySelector('.view');\n    var backButton = document.querySelectorAll('.button--back');\n    var listItems = document.querySelectorAll('.button--show-more');\n    var portfolioDescriptionView = document.querySelector('.screen--portfolio-item');\n\n    /**\n    * While clicking \"Show more\", activate description view and fill it with data\n    * @param {Object} evt - button click event\n    **/\n    function onViewChange(evt) {\n      evt.preventDefault();\n      // change details data\n      if (evt.currentTarget.classList.contains('button--show-more')) {\n        var portfolioItemId = evt.currentTarget.getAttribute('data-itemid');\n        fillPortfolioItemDescription(portfolioItemId);\n      }\n      // change view - add \"active\" class to main view container\n      view.classList.toggle('view--change');\n      // go to the top of portfolio item description container while \"show more\" event\n      if (view.classList.contains('view--change')) {\n        portfolioDescriptionView.scrollTop = 0;\n      }\n    }\n\n    for (var j = 0; j < listItems.length; j++) {\n      listItems[j].addEventListener('click', onViewChange, false);\n    }\n    for (var k = 0; k < backButton.length; k++) {\n      backButton[k].addEventListener('click', onViewChange, false);\n    }\n  }\n\n  /**\n  * Runs while document is loaded...\n  */\n  function loaded() {\n    // prevent default submit form action, redirect to handleFormSubmit()\n    var form = document.getElementById('contact_form');\n    form.addEventListener('submit', handleFormSubmit, false);\n    console.log('Info: form submit function loaded');\n\n    // make internal buttons alive\n    var menuBtn = document.getElementById('menu-button');\n    menuBtn.addEventListener('click', menuTrigger, false);\n    var menuBtnClose = document.getElementById('menu-button-close');\n    menuBtnClose.addEventListener('click', menuTrigger, false);\n    var menuLinks = document.getElementsByClassName('internal-link');\n    for (var i = 0; i < menuLinks.length; i++) {\n      menuLinks[i].addEventListener('click', scrollTo, false);\n    }\n    console.log('Info: menu trigger functions loaded');\n\n    // create portfolio items\n    insertPortoflioItems(PORTFOLIO_ITEMS);\n\n    // make portoflio item alive\n    viewChanger();\n  }\n  document.addEventListener('DOMContentLoaded', loaded, false);\n})();\n"]}