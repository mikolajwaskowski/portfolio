{"version":3,"sources":["main.min.js","main.js"],"names":["getFormData","form","document","getElementById","data","Object","keys","elements","map","key","isNaN","value","emailValid","email","re","test","formLoading","event","target","children","contact_form__submit","disabled","innerHTML","className","style","display","formLoadingReset","inputsFilled","filled","message","length","name","handleFormSubmit","preventDefault","isLoading","allInputsFilled","url","action","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","status","console","log","responseText","encoded","encodeURIComponent","join","send","menuTrigger","overlay","classList","toggle","overlayActive","contains","scrollTo","getAttribute","scrollIntoView","behavior","insertPortoflioItems","items","container","forEach","element","index","section","createElement","sectionMedia","previewImage","sectionText","previewText","appendChild","fillPortfolioItemDescription","itemId","itemName","querySelector","itemDescrption","imagesContainer","toolsContainer","liveAt","externalLinkButton","PORTFOLIO_ITEMS","description","images","tools","TOOLS","icon","href","viewChanger","onViewChange","evt","currentTarget","portfolioItemId","view","portfolioDescriptionView","scrollTop","backButton","querySelectorAll","listItems","j","addEventListener","k","loaded","menuBtn","menuBtnClose","menuLinks","getElementsByClassName","i","isLocalhost","Boolean","window","location","hostname","match","navigator","protocol","serviceWorker","register","then","registration","onupdatefound","controller","installingWorker","installing","onstatechange","state","Error","e","error","sketch","mailingHtml","spotify"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;CCmBA,WAyGE,QAASA,KACP,GAAIC,GAAOC,SAASC,eAAe,gBAE/BC,IAMJ,OALAC,QAAOC,KAAKL,EAAKM,UAAUC,IAAI,SAASC,GAClCC,MAAMD,KACRL,EAAKK,GAAOR,EAAKM,SAASE,GAAKE,SAG5BP,EAQT,QAASQ,GAAWC,GAClB,GAAIC,GAAK,oFACT,QAAQA,EAAGC,KAAKF,GAQlB,QAASG,GAAYC,GAOnB,MALAA,GAAMC,OAAOC,SAASC,qBAAqBC,UAAW,EACtDJ,EAAMC,OAAOC,SAASC,qBAAqBE,UAAY,eACvDL,EAAMC,OAAOC,SAASC,qBAAqBG,WAAa,mBACxDrB,SAASC,eAAe,eAAeqB,MAAMC,QAAU,QAEhD,EAOT,QAASC,GAAiBT,GAMxB,MAJAA,GAAMC,OAAOC,SAASC,qBAAqBC,UAAW,EACtDJ,EAAMC,OAAOC,SAASC,qBAAqBE,UAAY,SACvDL,EAAMC,OAAOC,SAASC,qBAAqBG,UAAY,0BAEhD,EAOT,QAASI,GAAaV,GACpB,GAAIW,IAAS,CAWb,OAV0C,KAAtCX,EAAMC,OAAOW,QAAQlB,MAAMmB,SAC7BF,GAAS,GAE4B,IAAnCX,EAAMC,OAAOa,KAAKpB,MAAMmB,SAC1BF,GAAS,GAE6B,IAApCX,EAAMC,OAAOL,MAAMF,MAAMmB,SAC3BF,GAAS,GAGJA,EAOT,QAASI,GAAiBf,GACxBA,EAAMgB,gBACN,IAAI7B,GAAOJ,IACPkC,GAAY,EACZC,EAAkBR,EAAaV,EAGnC,IAAIiB,IAAcC,EAChBjC,SAASC,eAAe,eAAemB,UAAY,sCACnDpB,SAASC,eAAe,eAAeqB,MAAMC,QAAU,YAClD,IAAIb,EAAWR,EAAKS,OACzBX,SAASC,eAAe,eAAemB,UAAY,gCACnDpB,SAASC,eAAe,eAAeqB,MAAMC,QAAU,YAClD,CAELS,EAAYlB,EAAYC,EACxB,IAAImB,GAAMnB,EAAMC,OAAOmB,OACnBC,EAAM,GAAIC,eACdD,GAAIE,KAAK,OAAQJ,GACjBE,EAAIG,iBAAiB,eAAgB,qCACrCH,EAAII,mBAAqB,WACvBR,EAAYR,EAAiBT,GACV,MAAfqB,EAAIK,QACNzC,SAASC,eAAe,gBAAgBqB,MAAMC,QAAU,OACxDvB,SAASC,eAAe,oBAAoBqB,MAAMC,QAAU,UAE5DvB,SAASC,eAAe,eAAemB,UAAY,6JACnDpB,SAASC,eAAe,eAAeqB,MAAMC,QAAU,QACvDmB,QAAQC,IAAIP,EAAIQ,eAIpB,IAAIC,GAAU1C,OAAOC,KAAKF,GAAMI,IAAI,SAASC,GAC3C,MAAOuC,oBAAmBvC,GAAO,IAAMuC,mBAAmB5C,EAAKK,MAC9DwC,KAAK,IAERX,GAAIY,KAAKH,IAOb,QAASI,KACP,GAAIC,GAAUlD,SAASC,eAAe,UACtCiD,GAAQC,UAAUC,OAAO,sBAO3B,QAASC,KACP,MAAOrD,UAASC,eAAe,WAAWkD,UAAUG,SAAS,sBAO/D,QAASC,GAASxC,GAEhBf,SAASC,eAAec,EAAMC,OAAOwC,aAAa,cAAcC,gBAC9DC,SAAU,WAGRL,KACFJ,IAQJ,QAASU,GAAqBC,GAC5B,GAAIC,GAAY7D,SAASC,eAAe,4BACxC2D,GAAME,QAAQ,SAASC,EAASC,GAE9B,GAAIC,GAAUjE,SAASkE,cAAc,UACrCD,GAAQ5C,WAAa,2DAErB,IAAI8C,GAAenE,SAASkE,cAAc,MAC1CC,GAAa9C,WAAa,kDAC1B8C,EAAa/C,UAAY,aAAe2C,EAAQK,aAAe,2BAE/D,IAAIC,GAAcrE,SAASkE,cAAc,MACzCG,GAAYhD,WAAa,gDACzBgD,EAAYjD,UAAY,8BAAgC2C,EAAQlC,KAAO,QACvEwC,EAAYjD,WAAa,MAAQ2C,EAAQO,YAAc,OACvDD,EAAYjD,WAAa,oFAAsF4C,EAAQ,qGACvHC,EAAQM,YAAYJ,GACpBF,EAAQM,YAAYF,GACpBR,EAAUU,YAAYN,KAQ1B,QAASO,GAA6BC,GACpC,GAAIC,GAAW1E,SAAS2E,cAAc,yBAClCC,EAAiB5E,SAAS2E,cAAc,gCACxCE,EAAkB7E,SAAS2E,cAAc,sBACzCG,EAAiB9E,SAAS2E,cAAc,UACxCI,EAAS/E,SAAS2E,cAAc,uBAChCK,EAAqBhF,SAAS2E,cAAc,mBAEhDD,GAAStD,UAAY6D,EAAgBR,GAAQ5C,KAC7C+C,EAAexD,UAAY6D,EAAgBR,GAAQS,YAEnDL,EAAgBzD,UAAY,GAE5B6D,EAAgBR,GAAQU,OAAOrB,QAAQ,SAASC,EAASC,GACvDa,EAAgBzD,WAAa,aAAe2C,EAAU,UAAYkB,EAAgBR,GAAQ5C,KAAO,OAASmC,EAAQ,sDAEpHc,EAAe1D,UAAY,GAC3B6D,EAAgBR,GAAQW,MAAMtB,QAAQ,SAASC,GAC7Ce,EAAe1D,WAAa,qCAAuCiE,EAAMtB,GAASuB,KAAO,wBAA0BD,EAAMtB,GAASlC,KAAO,eAE3IkD,EAAO3D,UAAY,MAAQ6D,EAAgBR,GAAQM,OAAS,OAC5DC,EAAmBO,KAAO,KAAON,EAAgBR,GAAQM,OAM3D,QAASS,KAUP,QAASC,GAAaC,GAGpB,GAFAA,EAAI3D,iBAEA2D,EAAIC,cAAcxC,UAAUG,SAAS,qBAAsB,CAC7D,GAAIsC,GAAkBF,EAAIC,cAAcnC,aAAa,cACrDgB,GAA6BoB,GAG/BC,EAAK1C,UAAUC,OAAO,gBAElByC,EAAK1C,UAAUG,SAAS,kBAC1BwC,EAAyBC,UAAY,GAIzC,IAAK,GAxBDF,GAAO7F,SAAS2E,cAAc,SAC9BqB,EAAahG,SAASiG,iBAAiB,iBACvCC,EAAYlG,SAASiG,iBAAiB,sBACtCH,EAA2B9F,SAAS2E,cAAc,2BAqB7CwB,EAAI,EAAGA,EAAID,EAAUtE,OAAQuE,IACpCD,EAAUC,GAAGC,iBAAiB,QAASX,GAAc,EAEvD,KAAK,GAAIY,GAAI,EAAGA,EAAIL,EAAWpE,OAAQyE,IACrCL,EAAWK,GAAGD,iBAAiB,QAASX,GAAc,GAO1D,QAASa,KAEP,GAAIvG,GAAOC,SAASC,eAAe,eACnCF,GAAKqG,iBAAiB,SAAUtE,GAAkB,GAClDY,QAAQC,IAAI,oCAGZ,IAAI4D,GAAUvG,SAASC,eAAe,cACtCsG,GAAQH,iBAAiB,QAASnD,GAAa,EAC/C,IAAIuD,GAAexG,SAASC,eAAe,oBAC3CuG,GAAaJ,iBAAiB,QAASnD,GAAa,EAEpD,KAAK,GADDwD,GAAYzG,SAAS0G,uBAAuB,iBACvCC,EAAI,EAAGA,EAAIF,EAAU7E,OAAQ+E,IACpCF,EAAUE,GAAGP,iBAAiB,QAAS7C,GAAU,EAEnDb,SAAQC,IAAI,uCAGZgB,EAAqBsB,GAGrBO,IApWF,GAAIoB,GAAcC,QAAqC,cAA7BC,OAAOC,SAASC,UAET,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,0DAIF,kBAAmBC,aACW,WAA7BJ,OAAOC,SAASI,UAAyBP,IAC5CM,UAAUE,cAAcC,SAAS,qBAChCC,KAAK,SAASC,GAEbA,EAAaC,cAAgB,WAK3B,GAAIN,UAAUE,cAAcK,WAAY,CAGtC,GAAIC,GAAmBH,EAAaI,UAEpCD,GAAiBE,cAAgB,WAC/B,OAAQF,EAAiBG,OACvB,IAAK,YAKH,KAEF,KAAK,YACH,KAAM,IAAIC,OAAM,yDAvB5BZ,SAgCS,SAASa,GAChBrF,QAAQsF,MAAM,4CAA6CD,IAc/D,IAAI9C,KAEApD,KAAM,OACNyC,YAAa,mMACbF,aAAc,iCACdc,YAAa,cACbC,QAAS,kCACTC,OAAQ,SAAU,cAAe,WACjCL,OAAQ,eAGRlD,KAAM,SACNyC,YAAa,qEACbF,aAAc,iCACdc,YAAa,gBACbC,QAAS,iCAAkC,kCAC3CC,OAAQ,SAAU,eAClBL,OAAQ,iBAIRM,GACF4C,QACEpG,KAAM,SACNyD,KAAM,4BAER4C,aACErG,KAAM,iBACNyD,KAAM,8BAER6C,SACEtG,KAAM,UACNyD,KAAM,6BA4QVtF,UAASoG,iBAAiB,mBAAoBE,GAAQ","file":"main.min.js","sourcesContent":["'use strict'; /*!\n               *\n               *  Web Starter Kit\n               *  Copyright 2015 Google Inc. All rights reserved.\n               *\n               *  Licensed under the Apache License, Version 2.0 (the \"License\");\n               *  you may not use this file except in compliance with the License.\n               *  You may obtain a copy of the License at\n               *\n               *    https://www.apache.org/licenses/LICENSE-2.0\n               *\n               *  Unless required by applicable law or agreed to in writing, software\n               *  distributed under the License is distributed on an \"AS IS\" BASIS,\n               *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n               *  See the License for the specific language governing permissions and\n               *  limitations under the License\n               *\n               */\n/* eslint-env browser */\n(function () {\n  'use strict';\n\n  // Check to make sure service workers are supported in the current browser,\n  // and that the current page is accessed from a secure origin. Using a\n  // service worker from an insecure origin will trigger JS console errors. See\n  // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n  var isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.1/8 is considered localhost for IPv4.\n  window.location.hostname.match(\n  /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));\n\n\n\n  if ('serviceWorker' in navigator && (\n  window.location.protocol === 'https:' || isLocalhost)) {\n    navigator.serviceWorker.register('service-worker.js').\n    then(function (registration) {\n      // updatefound is fired if service-worker.js changes.\n      registration.onupdatefound = function () {\n        // updatefound is also fired the very first time the SW is installed,\n        // and there's no need to prompt for a reload at that point.\n        // So check here to see if the page is already controlled,\n        // i.e. whether there's an existing service worker.\n        if (navigator.serviceWorker.controller) {\n          // The updatefound event implies that registration.installing is set:\n          // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html\n          var installingWorker = registration.installing;\n\n          installingWorker.onstatechange = function () {\n            switch (installingWorker.state) {\n              case 'installed':\n                // At this point, the old content will have been purged and the\n                // fresh content will have been added to the cache.\n                // It's the perfect time to display a \"New content is\n                // available; please refresh.\" message in the page's interface.\n                break;\n\n              case 'redundant':\n                throw new Error('The installing ' +\n                'service worker became redundant.');\n\n              default:\n              // Ignore\n            }\n          };\n        }\n      };\n    }).catch(function (e) {\n      console.error('Error during service worker registration:', e);\n    });\n  }\n\n  /**\n    *\n    *\n    *\n    * Custom JavaScript\n    *\n    *\n    *\n    **/\n\n  var PORTFOLIO_ITEMS = [\n  {\n    name: 'test',\n    previewText: 'Elit fringilla rutrum. Aenean sollicitudin, erat a elementum rutrum, neque sem pretium metus, quis mollis nisl nunc et massa. Vestibulum sed metus in lorem tristique ullamcorper id vitae erat.',\n    previewImage: './images/portfolio_items/1.jpg',\n    description: 'description',\n    images: ['./images/portfolio_items/1.jpg'],\n    tools: ['sketch', 'mailingHtml', 'spotify'],\n    liveAt: 'google.com' },\n\n  {\n    name: 'test 2',\n    previewText: 'Vestibulum sed metus in lorem tristique ullamcorper id vitae erat.',\n    previewImage: './images/portfolio_items/2.jpg',\n    description: 'description 2',\n    images: ['./images/portfolio_items/2.jpg', './images/portfolio_items/1.jpg'],\n    tools: ['sketch', 'mailingHtml'],\n    liveAt: 'facebook.com' }];\n\n\n\n  var TOOLS = {\n    sketch: {\n      name: 'Sketch',\n      icon: './images/tool-sketch.png' },\n\n    mailingHtml: {\n      name: 'E-mailing HTML',\n      icon: './images/tool-template.png' },\n\n    spotify: {\n      name: 'Spotify',\n      icon: './images/tool-spotify.png' } };\n\n\n\n  /**\n                                             * Gets contact form input values\n                                             * @return {object} set of inputs -> object[input_name] = input_value\n                                             */\n  function getFormData() {\n    var form = document.getElementById('contact_form');\n    // get form inputs data\n    var data = {};\n    Object.keys(form.elements).map(function (key) {\n      if (isNaN(key)) {\n        data[key] = form.elements[key].value;\n      }\n    });\n    return data;\n  }\n\n  /**\n    * Email validation regexp\n    * @param {string} email for validation\n    * @return {boolean} email validation result\n    */\n  function emailValid(email) {\n    var re = /^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i;\n    return !re.test(email);\n  }\n\n  /**\n    * Form state - loading\n    * @param {Object} event DOM form event\n    * @return {boolean} is loading? true\n    */\n  function formLoading(event) {\n    // make visual change for loading state\n    event.target.children.contact_form__submit.disabled = true;\n    event.target.children.contact_form__submit.innerHTML = 'Wysyłanie...';\n    event.target.children.contact_form__submit.className += ' button--loading';\n    document.getElementById('form__error').style.display = 'none';\n\n    return true;\n  }\n  /**\n    * Form loading state - reset\n    * @param {Object} event DOM form event\n    * @return {boolean} is loading? false\n    */\n  function formLoadingReset(event) {\n    // make visual change for loading state\n    event.target.children.contact_form__submit.disabled = false;\n    event.target.children.contact_form__submit.innerHTML = 'Wyślij';\n    event.target.children.contact_form__submit.className = 'button button--primary';\n\n    return false;\n  }\n  /**\n    * Detects empty inputs in form\n    * @param {Object} event DOM form event\n    * @return {boolean} every form inputs filled?\n    */\n  function inputsFilled(event) {\n    var filled = true;\n    if (event.target.message.value.length === 0) {\n      filled = false;\n    }\n    if (event.target.name.value.length === 0) {\n      filled = false;\n    }\n    if (event.target.email.value.length === 0) {\n      filled = false;\n    }\n\n    return filled;\n  }\n\n  /**\n    * Send form data\n    * @param {Object} event DOM event\n    */\n  function handleFormSubmit(event) {\n    event.preventDefault();\n    var data = getFormData();\n    var isLoading = false;\n    var allInputsFilled = inputsFilled(event);\n\n    // VALIDATION\n    if (isLoading || !allInputsFilled) {\n      document.getElementById('form__error').innerHTML = 'Uzupełnij wszystkie pola formularza';\n      document.getElementById('form__error').style.display = 'block';\n    } else if (emailValid(data.email)) {\n      document.getElementById('form__error').innerHTML = 'Wpisz prawidłowy adres e-mail';\n      document.getElementById('form__error').style.display = 'block';\n    } else {\n      // VALIDATION PASSED\n      isLoading = formLoading(event);\n      var url = event.target.action;\n      var xhr = new XMLHttpRequest();\n      xhr.open('POST', url);\n      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n      xhr.onreadystatechange = function () {\n        isLoading = formLoadingReset(event);\n        if (xhr.status === 200) {\n          document.getElementById('contact_form').style.display = 'none';\n          document.getElementById('thankyou_message').style.display = 'block';\n        } else {\n          document.getElementById('form__error').innerHTML = 'Coś poszło nie tak :( <br /> Wyślij proszę e-mail na adres: <a href=\"mailto:waskowski.mikolaj@gmail.com\">waskowski.mikolaj@gmail.com</a>. <br /> Dziękuję!';\n          document.getElementById('form__error').style.display = 'block';\n          console.log(xhr.responseText);\n        }\n      };\n      // url encode form data for sending as post data\n      var encoded = Object.keys(data).map(function (key) {\n        return encodeURIComponent(key) + '=' + encodeURIComponent(data[key]);\n      }).join('&');\n\n      xhr.send(encoded);\n    }\n  }\n\n  /**\n    * Activating overlay menu\n    */\n  function menuTrigger() {\n    var overlay = document.getElementById('overlay');\n    overlay.classList.toggle('menu-overlay--open');\n  }\n\n  /**\n    * Check that menu is opened (overlay is active)\n    * @return {boolean} Menu active?\n    */\n  function overlayActive() {\n    return document.getElementById('overlay').classList.contains('menu-overlay--open');\n  }\n\n  /**\n    * Scrolls to element, closing menu overlay if needed\n    * @param {Object} event DOM event\n    */\n  function scrollTo(event) {\n    // goto section marked as button data-goto attribute\n    document.getElementById(event.target.getAttribute('data-goto')).scrollIntoView({\n      behavior: 'smooth' });\n\n    // need to close menu overlay?\n    if (overlayActive()) {\n      menuTrigger();\n    }\n  }\n\n  /**\n    * Fill portfolio with Portfolio_items\n    * @param {Array} items - array of portfolio items\n    */\n  function insertPortoflioItems(items) {\n    var container = document.getElementById('portfolio_items_container');\n    items.forEach(function (element, index) {\n      // create main container\n      var section = document.createElement('section');\n      section.className += ' container section section--left section--portfolio-item ';\n      // create box for item preview\n      var sectionMedia = document.createElement('div');\n      sectionMedia.className += ' section__media section__media--portfolio-item ';\n      sectionMedia.innerHTML = '<img src=\"' + element.previewImage + '\" alt=\"portfolio_item\" />';\n      // create box for item name and description\n      var sectionText = document.createElement('div');\n      sectionText.className += ' section__text section__text--portfolio-item ';\n      sectionText.innerHTML = '<h3 class=\"section__title\">' + element.name + '</h3>';\n      sectionText.innerHTML += '<p>' + element.previewText + '</p>';\n      sectionText.innerHTML += '<button class=\"button button--text button--green button--show-more\" data-itemid=\"' + index + '\"><img src=\"./images/icon-info.svg\" alt=\"\" class=\"button__icon--left\" /> Zobacz szczegóły</button>';\n      section.appendChild(sectionMedia);\n      section.appendChild(sectionText);\n      container.appendChild(section);\n    });\n  }\n\n  /**\n    * Fill portfolio item description with data\n    * @param {Number} itemId - id of portfolio item\n    */\n  function fillPortfolioItemDescription(itemId) {\n    var itemName = document.querySelector('.portfolio__item-name');\n    var itemDescrption = document.querySelector('.portfolio__item-description');\n    var imagesContainer = document.querySelector('.portfolio__images');\n    var toolsContainer = document.querySelector('.tools');\n    var liveAt = document.querySelector('.portfolio__live-at');\n    var externalLinkButton = document.querySelector('.button--live-at');\n\n    itemName.innerHTML = PORTFOLIO_ITEMS[itemId].name;\n    itemDescrption.innerHTML = PORTFOLIO_ITEMS[itemId].description;\n    // clear images container from old images\n    imagesContainer.innerHTML = '';\n    // fill images container with new images\n    PORTFOLIO_ITEMS[itemId].images.forEach(function (element, index) {\n      imagesContainer.innerHTML += '<img src=\"' + element + '\" alt=\"' + PORTFOLIO_ITEMS[itemId].name + ' - #' + index + ' presentation image\" class=\"portfolio__image\" /> ';\n    });\n    toolsContainer.innerHTML = '';\n    PORTFOLIO_ITEMS[itemId].tools.forEach(function (element) {\n      toolsContainer.innerHTML += '<div class=\"tools_item\"><img src=\"' + TOOLS[element].icon + '\" alt=\"\" class=\"\"><p>' + TOOLS[element].name + '</p></div>';\n    });\n    liveAt.innerHTML = '<p>' + PORTFOLIO_ITEMS[itemId].liveAt + '</p>';\n    externalLinkButton.href = '//' + PORTFOLIO_ITEMS[itemId].liveAt;\n  }\n\n  /**\n    * Make portfolio item alive\n    **/\n  function viewChanger() {\n    var view = document.querySelector('.view');\n    var backButton = document.querySelectorAll('.button--back');\n    var listItems = document.querySelectorAll('.button--show-more');\n    var portfolioDescriptionView = document.querySelector('.screen--portfolio-item');\n\n    /**\n                                                                                      * While clicking \"Show more\", activate description view and fill it with data\n                                                                                      * @param {Object} evt - button click event\n                                                                                      **/\n    function onViewChange(evt) {\n      evt.preventDefault();\n      // change details data\n      if (evt.currentTarget.classList.contains('button--show-more')) {\n        var portfolioItemId = evt.currentTarget.getAttribute('data-itemid');\n        fillPortfolioItemDescription(portfolioItemId);\n      }\n      // change view - add \"active\" class to main view container\n      view.classList.toggle('view--change');\n      // go to the top of portfolio item description container while \"show more\" event\n      if (view.classList.contains('view--change')) {\n        portfolioDescriptionView.scrollTop = 0;\n      }\n    }\n\n    for (var j = 0; j < listItems.length; j++) {\n      listItems[j].addEventListener('click', onViewChange, false);\n    }\n    for (var k = 0; k < backButton.length; k++) {\n      backButton[k].addEventListener('click', onViewChange, false);\n    }\n  }\n\n  /**\n    * Runs while document is loaded...\n    */\n  function loaded() {\n    // prevent default submit form action, redirect to handleFormSubmit()\n    var form = document.getElementById('contact_form');\n    form.addEventListener('submit', handleFormSubmit, false);\n    console.log('Info: form submit function loaded');\n\n    // make internal buttons alive\n    var menuBtn = document.getElementById('menu-button');\n    menuBtn.addEventListener('click', menuTrigger, false);\n    var menuBtnClose = document.getElementById('menu-button-close');\n    menuBtnClose.addEventListener('click', menuTrigger, false);\n    var menuLinks = document.getElementsByClassName('internal-link');\n    for (var i = 0; i < menuLinks.length; i++) {\n      menuLinks[i].addEventListener('click', scrollTo, false);\n    }\n    console.log('Info: menu trigger functions loaded');\n\n    // create portfolio items\n    insertPortoflioItems(PORTFOLIO_ITEMS);\n\n    // make portoflio item alive\n    viewChanger();\n  }\n  document.addEventListener('DOMContentLoaded', loaded, false);\n})();\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaXNMb2NhbGhvc3QiLCJCb29sZWFuIiwid2luZG93IiwibG9jYXRpb24iLCJob3N0bmFtZSIsIm1hdGNoIiwibmF2aWdhdG9yIiwicHJvdG9jb2wiLCJzZXJ2aWNlV29ya2VyIiwicmVnaXN0ZXIiLCJ0aGVuIiwicmVnaXN0cmF0aW9uIiwib251cGRhdGVmb3VuZCIsImNvbnRyb2xsZXIiLCJpbnN0YWxsaW5nV29ya2VyIiwiaW5zdGFsbGluZyIsIm9uc3RhdGVjaGFuZ2UiLCJzdGF0ZSIsIkVycm9yIiwiY2F0Y2giLCJlIiwiY29uc29sZSIsImVycm9yIiwiUE9SVEZPTElPX0lURU1TIiwibmFtZSIsInByZXZpZXdUZXh0IiwicHJldmlld0ltYWdlIiwiZGVzY3JpcHRpb24iLCJpbWFnZXMiLCJ0b29scyIsImxpdmVBdCIsIlRPT0xTIiwic2tldGNoIiwiaWNvbiIsIm1haWxpbmdIdG1sIiwic3BvdGlmeSIsImdldEZvcm1EYXRhIiwiZm9ybSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJkYXRhIiwiT2JqZWN0Iiwia2V5cyIsImVsZW1lbnRzIiwibWFwIiwia2V5IiwiaXNOYU4iLCJ2YWx1ZSIsImVtYWlsVmFsaWQiLCJlbWFpbCIsInJlIiwidGVzdCIsImZvcm1Mb2FkaW5nIiwiZXZlbnQiLCJ0YXJnZXQiLCJjaGlsZHJlbiIsImNvbnRhY3RfZm9ybV9fc3VibWl0IiwiZGlzYWJsZWQiLCJpbm5lckhUTUwiLCJjbGFzc05hbWUiLCJzdHlsZSIsImRpc3BsYXkiLCJmb3JtTG9hZGluZ1Jlc2V0IiwiaW5wdXRzRmlsbGVkIiwiZmlsbGVkIiwibWVzc2FnZSIsImxlbmd0aCIsImhhbmRsZUZvcm1TdWJtaXQiLCJwcmV2ZW50RGVmYXVsdCIsImlzTG9hZGluZyIsImFsbElucHV0c0ZpbGxlZCIsInVybCIsImFjdGlvbiIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJzdGF0dXMiLCJsb2ciLCJyZXNwb25zZVRleHQiLCJlbmNvZGVkIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwiam9pbiIsInNlbmQiLCJtZW51VHJpZ2dlciIsIm92ZXJsYXkiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJvdmVybGF5QWN0aXZlIiwiY29udGFpbnMiLCJzY3JvbGxUbyIsImdldEF0dHJpYnV0ZSIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJpbnNlcnRQb3J0b2ZsaW9JdGVtcyIsIml0ZW1zIiwiY29udGFpbmVyIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJpbmRleCIsInNlY3Rpb24iLCJjcmVhdGVFbGVtZW50Iiwic2VjdGlvbk1lZGlhIiwic2VjdGlvblRleHQiLCJhcHBlbmRDaGlsZCIsImZpbGxQb3J0Zm9saW9JdGVtRGVzY3JpcHRpb24iLCJpdGVtSWQiLCJpdGVtTmFtZSIsInF1ZXJ5U2VsZWN0b3IiLCJpdGVtRGVzY3JwdGlvbiIsImltYWdlc0NvbnRhaW5lciIsInRvb2xzQ29udGFpbmVyIiwiZXh0ZXJuYWxMaW5rQnV0dG9uIiwiaHJlZiIsInZpZXdDaGFuZ2VyIiwidmlldyIsImJhY2tCdXR0b24iLCJxdWVyeVNlbGVjdG9yQWxsIiwibGlzdEl0ZW1zIiwicG9ydGZvbGlvRGVzY3JpcHRpb25WaWV3Iiwib25WaWV3Q2hhbmdlIiwiZXZ0IiwiY3VycmVudFRhcmdldCIsInBvcnRmb2xpb0l0ZW1JZCIsInNjcm9sbFRvcCIsImoiLCJhZGRFdmVudExpc3RlbmVyIiwiayIsImxvYWRlZCIsIm1lbnVCdG4iLCJtZW51QnRuQ2xvc2UiLCJtZW51TGlua3MiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaSJdLCJtYXBwaW5ncyI6ImNBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtCQTtBQUNBLENBQUMsWUFBVztBQUNWOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSUEsY0FBY0MsUUFBUUMsT0FBT0MsUUFBUCxDQUFnQkMsUUFBaEIsS0FB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biAqICBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICBodHRwczovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqICBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiAgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlXG4gKlxuICovXG4vKiBlc2xpbnQtZW52IGJyb3dzZXIgKi9cbihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIENoZWNrIHRvIG1ha2Ugc3VyZSBzZXJ2aWNlIHdvcmtlcnMgYXJlIHN1cHBvcnRlZCBpbiB0aGUgY3VycmVudCBicm93c2VyLFxuICAvLyBhbmQgdGhhdCB0aGUgY3VycmVudCBwYWdlIGlzIGFjY2Vzc2VkIGZyb20gYSBzZWN1cmUgb3JpZ2luLiBVc2luZyBhXG4gIC8vIHNlcnZpY2Ugd29ya2VyIGZyb20gYW4gaW5zZWN1cmUgb3JpZ2luIHdpbGwgdHJpZ2dlciBKUyBjb25zb2xlIGVycm9ycy4gU2VlXG4gIC8vIGh0dHA6Ly93d3cuY2hyb21pdW0ub3JnL0hvbWUvY2hyb21pdW0tc2VjdXJpdHkvcHJlZmVyLXNlY3VyZS1vcmlnaW5zLWZvci1wb3dlcmZ1bC1uZXctZmVhdHVyZXNcbiAgdmFyIGlzTG9jYWxob3N0ID0gQm9vbGVhbih3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnIHx8XG4gICAgICAvLyBbOjoxXSBpcyB0aGUgSVB2NiBsb2NhbGhvc3QgYWRkcmVzcy5cbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PT0gJ1s6OjFdJyB8fFxuICAgICAgLy8gMTI3LjAuMC4xLzggaXMgY29uc2lkZXJlZCBsb2NhbGhvc3QgZm9yIElQdjQuXG4gICAgICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUubWF0Y2goXG4gICAgICAgIC9eMTI3KD86XFwuKD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KSl7M30kL1xuICAgICAgKVxuICAgICk7XG5cbiAgaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IgJiZcbiAgICAgICh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonIHx8IGlzTG9jYWxob3N0KSkge1xuICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCdzZXJ2aWNlLXdvcmtlci5qcycpXG4gICAgLnRoZW4oZnVuY3Rpb24ocmVnaXN0cmF0aW9uKSB7XG4gICAgICAvLyB1cGRhdGVmb3VuZCBpcyBmaXJlZCBpZiBzZXJ2aWNlLXdvcmtlci5qcyBjaGFuZ2VzLlxuICAgICAgcmVnaXN0cmF0aW9uLm9udXBkYXRlZm91bmQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gdXBkYXRlZm91bmQgaXMgYWxzbyBmaXJlZCB0aGUgdmVyeSBmaXJzdCB0aW1lIHRoZSBTVyBpcyBpbnN0YWxsZWQsXG4gICAgICAgIC8vIGFuZCB0aGVyZSdzIG5vIG5lZWQgdG8gcHJvbXB0IGZvciBhIHJlbG9hZCBhdCB0aGF0IHBvaW50LlxuICAgICAgICAvLyBTbyBjaGVjayBoZXJlIHRvIHNlZSBpZiB0aGUgcGFnZSBpcyBhbHJlYWR5IGNvbnRyb2xsZWQsXG4gICAgICAgIC8vIGkuZS4gd2hldGhlciB0aGVyZSdzIGFuIGV4aXN0aW5nIHNlcnZpY2Ugd29ya2VyLlxuICAgICAgICBpZiAobmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlcikge1xuICAgICAgICAgIC8vIFRoZSB1cGRhdGVmb3VuZCBldmVudCBpbXBsaWVzIHRoYXQgcmVnaXN0cmF0aW9uLmluc3RhbGxpbmcgaXMgc2V0OlxuICAgICAgICAgIC8vIGh0dHBzOi8vc2xpZ2h0bHlvZmYuZ2l0aHViLmlvL1NlcnZpY2VXb3JrZXIvc3BlYy9zZXJ2aWNlX3dvcmtlci9pbmRleC5odG1sXG4gICAgICAgICAgdmFyIGluc3RhbGxpbmdXb3JrZXIgPSByZWdpc3RyYXRpb24uaW5zdGFsbGluZztcblxuICAgICAgICAgIGluc3RhbGxpbmdXb3JrZXIub25zdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc3dpdGNoIChpbnN0YWxsaW5nV29ya2VyLnN0YXRlKSB7XG4gICAgICAgICAgICAgIGNhc2UgJ2luc3RhbGxlZCc6XG4gICAgICAgICAgICAgICAgLy8gQXQgdGhpcyBwb2ludCwgdGhlIG9sZCBjb250ZW50IHdpbGwgaGF2ZSBiZWVuIHB1cmdlZCBhbmQgdGhlXG4gICAgICAgICAgICAgICAgLy8gZnJlc2ggY29udGVudCB3aWxsIGhhdmUgYmVlbiBhZGRlZCB0byB0aGUgY2FjaGUuXG4gICAgICAgICAgICAgICAgLy8gSXQncyB0aGUgcGVyZmVjdCB0aW1lIHRvIGRpc3BsYXkgYSBcIk5ldyBjb250ZW50IGlzXG4gICAgICAgICAgICAgICAgLy8gYXZhaWxhYmxlOyBwbGVhc2UgcmVmcmVzaC5cIiBtZXNzYWdlIGluIHRoZSBwYWdlJ3MgaW50ZXJmYWNlLlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgJ3JlZHVuZGFudCc6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgaW5zdGFsbGluZyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NlcnZpY2Ugd29ya2VyIGJlY2FtZSByZWR1bmRhbnQuJyk7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGR1cmluZyBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb246JywgZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgKlxuICAqXG4gICpcbiAgKiBDdXN0b20gSmF2YVNjcmlwdFxuICAqXG4gICpcbiAgKlxuICAqKi9cblxuICB2YXIgUE9SVEZPTElPX0lURU1TID0gW1xuICAgIHtcbiAgICAgIG5hbWU6ICd0ZXN0JyxcbiAgICAgIHByZXZpZXdUZXh0OiAnRWxpdCBmcmluZ2lsbGEgcnV0cnVtLiBBZW5lYW4gc29sbGljaXR1ZGluLCBlcmF0IGEgZWxlbWVudHVtIHJ1dHJ1bSwgbmVxdWUgc2VtIHByZXRpdW0gbWV0dXMsIHF1aXMgbW9sbGlzIG5pc2wgbnVuYyBldCBtYXNzYS4gVmVzdGlidWx1bSBzZWQgbWV0dXMgaW4gbG9yZW0gdHJpc3RpcXVlIHVsbGFtY29ycGVyIGlkIHZpdGFlIGVyYXQuJyxcbiAgICAgIHByZXZpZXdJbWFnZTogJy4vaW1hZ2VzL3BvcnRmb2xpb19pdGVtcy8xLmpwZycsXG4gICAgICBkZXNjcmlwdGlvbjogJ2Rlc2NyaXB0aW9uJyxcbiAgICAgIGltYWdlczogWycuL2ltYWdlcy9wb3J0Zm9saW9faXRlbXMvMS5qcGcnXSxcbiAgICAgIHRvb2xzOiBbJ3NrZXRjaCcsICdtYWlsaW5nSHRtbCcsICdzcG90aWZ5J10sXG4gICAgICBsaXZlQXQ6ICdnb29nbGUuY29tJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3Rlc3QgMicsXG4gICAgICBwcmV2aWV3VGV4dDogJ1Zlc3RpYnVsdW0gc2VkIG1ldHVzIGluIGxvcmVtIHRyaXN0aXF1ZSB1bGxhbWNvcnBlciBpZCB2aXRhZSBlcmF0LicsXG4gICAgICBwcmV2aWV3SW1hZ2U6ICcuL2ltYWdlcy9wb3J0Zm9saW9faXRlbXMvMi5qcGcnLFxuICAgICAgZGVzY3JpcHRpb246ICdkZXNjcmlwdGlvbiAyJyxcbiAgICAgIGltYWdlczogWycuL2ltYWdlcy9wb3J0Zm9saW9faXRlbXMvMi5qcGcnLCAnLi9pbWFnZXMvcG9ydGZvbGlvX2l0ZW1zLzEuanBnJ10sXG4gICAgICB0b29sczogWydza2V0Y2gnLCAnbWFpbGluZ0h0bWwnXSxcbiAgICAgIGxpdmVBdDogJ2ZhY2Vib29rLmNvbSdcbiAgICB9XG4gIF07XG5cbiAgdmFyIFRPT0xTID0ge1xuICAgIHNrZXRjaDoge1xuICAgICAgbmFtZTogJ1NrZXRjaCcsXG4gICAgICBpY29uOiAnLi9pbWFnZXMvdG9vbC1za2V0Y2gucG5nJ1xuICAgIH0sXG4gICAgbWFpbGluZ0h0bWw6IHtcbiAgICAgIG5hbWU6ICdFLW1haWxpbmcgSFRNTCcsXG4gICAgICBpY29uOiAnLi9pbWFnZXMvdG9vbC10ZW1wbGF0ZS5wbmcnXG4gICAgfSxcbiAgICBzcG90aWZ5OiB7XG4gICAgICBuYW1lOiAnU3BvdGlmeScsXG4gICAgICBpY29uOiAnLi9pbWFnZXMvdG9vbC1zcG90aWZ5LnBuZydcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICogR2V0cyBjb250YWN0IGZvcm0gaW5wdXQgdmFsdWVzXG4gICogQHJldHVybiB7b2JqZWN0fSBzZXQgb2YgaW5wdXRzIC0+IG9iamVjdFtpbnB1dF9uYW1lXSA9IGlucHV0X3ZhbHVlXG4gICovXG4gIGZ1bmN0aW9uIGdldEZvcm1EYXRhKCkge1xuICAgIHZhciBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhY3RfZm9ybScpO1xuICAgIC8vIGdldCBmb3JtIGlucHV0cyBkYXRhXG4gICAgdmFyIGRhdGEgPSB7fTtcbiAgICBPYmplY3Qua2V5cyhmb3JtLmVsZW1lbnRzKS5tYXAoZnVuY3Rpb24oa2V5KSB7XG4gICAgICBpZiAoaXNOYU4oa2V5KSkge1xuICAgICAgICBkYXRhW2tleV0gPSBmb3JtLmVsZW1lbnRzW2tleV0udmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICAvKipcbiAgKiBFbWFpbCB2YWxpZGF0aW9uIHJlZ2V4cFxuICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbCBmb3IgdmFsaWRhdGlvblxuICAqIEByZXR1cm4ge2Jvb2xlYW59IGVtYWlsIHZhbGlkYXRpb24gcmVzdWx0XG4gICovXG4gIGZ1bmN0aW9uIGVtYWlsVmFsaWQoZW1haWwpIHtcbiAgICB2YXIgcmUgPSAvXihbXFx3LV0rKD86XFwuW1xcdy1dKykqKUAoKD86W1xcdy1dK1xcLikqXFx3W1xcdy1dezAsNjZ9KVxcLihbYS16XXsyLDZ9KD86XFwuW2Etel17Mn0pPykkL2k7XG4gICAgcmV0dXJuICFyZS50ZXN0KGVtYWlsKTtcbiAgfVxuXG4gIC8qKlxuICAqIEZvcm0gc3RhdGUgLSBsb2FkaW5nXG4gICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IERPTSBmb3JtIGV2ZW50XG4gICogQHJldHVybiB7Ym9vbGVhbn0gaXMgbG9hZGluZz8gdHJ1ZVxuICAqL1xuICBmdW5jdGlvbiBmb3JtTG9hZGluZyhldmVudCkge1xuICAgIC8vIG1ha2UgdmlzdWFsIGNoYW5nZSBmb3IgbG9hZGluZyBzdGF0ZVxuICAgIGV2ZW50LnRhcmdldC5jaGlsZHJlbi5jb250YWN0X2Zvcm1fX3N1Ym1pdC5kaXNhYmxlZCA9IHRydWU7XG4gICAgZXZlbnQudGFyZ2V0LmNoaWxkcmVuLmNvbnRhY3RfZm9ybV9fc3VibWl0LmlubmVySFRNTCA9ICdXeXN5xYJhbmllLi4uJztcbiAgICBldmVudC50YXJnZXQuY2hpbGRyZW4uY29udGFjdF9mb3JtX19zdWJtaXQuY2xhc3NOYW1lICs9ICcgYnV0dG9uLS1sb2FkaW5nJztcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybV9fZXJyb3InKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyoqXG4gICogRm9ybSBsb2FkaW5nIHN0YXRlIC0gcmVzZXRcbiAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgRE9NIGZvcm0gZXZlbnRcbiAgKiBAcmV0dXJuIHtib29sZWFufSBpcyBsb2FkaW5nPyBmYWxzZVxuICAqL1xuICBmdW5jdGlvbiBmb3JtTG9hZGluZ1Jlc2V0KGV2ZW50KSB7XG4gICAgLy8gbWFrZSB2aXN1YWwgY2hhbmdlIGZvciBsb2FkaW5nIHN0YXRlXG4gICAgZXZlbnQudGFyZ2V0LmNoaWxkcmVuLmNvbnRhY3RfZm9ybV9fc3VibWl0LmRpc2FibGVkID0gZmFsc2U7XG4gICAgZXZlbnQudGFyZ2V0LmNoaWxkcmVuLmNvbnRhY3RfZm9ybV9fc3VibWl0LmlubmVySFRNTCA9ICdXecWbbGlqJztcbiAgICBldmVudC50YXJnZXQuY2hpbGRyZW4uY29udGFjdF9mb3JtX19zdWJtaXQuY2xhc3NOYW1lID0gJ2J1dHRvbiBidXR0b24tLXByaW1hcnknO1xuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAqIERldGVjdHMgZW1wdHkgaW5wdXRzIGluIGZvcm1cbiAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgRE9NIGZvcm0gZXZlbnRcbiAgKiBAcmV0dXJuIHtib29sZWFufSBldmVyeSBmb3JtIGlucHV0cyBmaWxsZWQ/XG4gICovXG4gIGZ1bmN0aW9uIGlucHV0c0ZpbGxlZChldmVudCkge1xuICAgIHZhciBmaWxsZWQgPSB0cnVlO1xuICAgIGlmIChldmVudC50YXJnZXQubWVzc2FnZS52YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgIGZpbGxlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZXZlbnQudGFyZ2V0Lm5hbWUudmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICBmaWxsZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGV2ZW50LnRhcmdldC5lbWFpbC52YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgIGZpbGxlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiBmaWxsZWQ7XG4gIH1cblxuICAvKipcbiAgKiBTZW5kIGZvcm0gZGF0YVxuICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCBET00gZXZlbnRcbiAgKi9cbiAgZnVuY3Rpb24gaGFuZGxlRm9ybVN1Ym1pdChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIGRhdGEgPSBnZXRGb3JtRGF0YSgpO1xuICAgIHZhciBpc0xvYWRpbmcgPSBmYWxzZTtcbiAgICB2YXIgYWxsSW5wdXRzRmlsbGVkID0gaW5wdXRzRmlsbGVkKGV2ZW50KTtcblxuICAgIC8vIFZBTElEQVRJT05cbiAgICBpZiAoaXNMb2FkaW5nIHx8ICFhbGxJbnB1dHNGaWxsZWQpIHtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtX19lcnJvcicpLmlubmVySFRNTCA9ICdVenVwZcWCbmlqIHdzenlzdGtpZSBwb2xhIGZvcm11bGFyemEnO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm1fX2Vycm9yJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfSBlbHNlIGlmIChlbWFpbFZhbGlkKGRhdGEuZW1haWwpKSB7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybV9fZXJyb3InKS5pbm5lckhUTUwgPSAnV3Bpc3ogcHJhd2lkxYJvd3kgYWRyZXMgZS1tYWlsJztcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtX19lcnJvcicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBWQUxJREFUSU9OIFBBU1NFRFxuICAgICAgaXNMb2FkaW5nID0gZm9ybUxvYWRpbmcoZXZlbnQpO1xuICAgICAgdmFyIHVybCA9IGV2ZW50LnRhcmdldC5hY3Rpb247XG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICB4aHIub3BlbignUE9TVCcsIHVybCk7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpO1xuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpc0xvYWRpbmcgPSBmb3JtTG9hZGluZ1Jlc2V0KGV2ZW50KTtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWN0X2Zvcm0nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGFua3lvdV9tZXNzYWdlJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm1fX2Vycm9yJykuaW5uZXJIVE1MID0gJ0NvxZsgcG9zesWCbyBuaWUgdGFrIDooIDxiciAvPiBXecWbbGlqIHByb3N6xJkgZS1tYWlsIG5hIGFkcmVzOiA8YSBocmVmPVwibWFpbHRvOndhc2tvd3NraS5taWtvbGFqQGdtYWlsLmNvbVwiPndhc2tvd3NraS5taWtvbGFqQGdtYWlsLmNvbTwvYT4uIDxiciAvPiBEemnEmWt1asSZISc7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm1fX2Vycm9yJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgY29uc29sZS5sb2coeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICAvLyB1cmwgZW5jb2RlIGZvcm0gZGF0YSBmb3Igc2VuZGluZyBhcyBwb3N0IGRhdGFcbiAgICAgIHZhciBlbmNvZGVkID0gT2JqZWN0LmtleXMoZGF0YSkubWFwKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YVtrZXldKTtcbiAgICAgIH0pLmpvaW4oJyYnKTtcblxuICAgICAgeGhyLnNlbmQoZW5jb2RlZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICogQWN0aXZhdGluZyBvdmVybGF5IG1lbnVcbiAgKi9cbiAgZnVuY3Rpb24gbWVudVRyaWdnZXIoKSB7XG4gICAgdmFyIG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3ZlcmxheScpO1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZSgnbWVudS1vdmVybGF5LS1vcGVuJyk7XG4gIH1cblxuICAvKipcbiAgKiBDaGVjayB0aGF0IG1lbnUgaXMgb3BlbmVkIChvdmVybGF5IGlzIGFjdGl2ZSlcbiAgKiBAcmV0dXJuIHtib29sZWFufSBNZW51IGFjdGl2ZT9cbiAgKi9cbiAgZnVuY3Rpb24gb3ZlcmxheUFjdGl2ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ292ZXJsYXknKS5jbGFzc0xpc3QuY29udGFpbnMoJ21lbnUtb3ZlcmxheS0tb3BlbicpO1xuICB9XG5cbiAgLyoqXG4gICogU2Nyb2xscyB0byBlbGVtZW50LCBjbG9zaW5nIG1lbnUgb3ZlcmxheSBpZiBuZWVkZWRcbiAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgRE9NIGV2ZW50XG4gICovXG4gIGZ1bmN0aW9uIHNjcm9sbFRvKGV2ZW50KSB7XG4gICAgLy8gZ290byBzZWN0aW9uIG1hcmtlZCBhcyBidXR0b24gZGF0YS1nb3RvIGF0dHJpYnV0ZVxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZ290bycpKS5zY3JvbGxJbnRvVmlldyh7XG4gICAgICBiZWhhdmlvcjogJ3Ntb290aCdcbiAgICB9KTtcbiAgICAvLyBuZWVkIHRvIGNsb3NlIG1lbnUgb3ZlcmxheT9cbiAgICBpZiAob3ZlcmxheUFjdGl2ZSgpKSB7XG4gICAgICBtZW51VHJpZ2dlcigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAqIEZpbGwgcG9ydGZvbGlvIHdpdGggUG9ydGZvbGlvX2l0ZW1zXG4gICogQHBhcmFtIHtBcnJheX0gaXRlbXMgLSBhcnJheSBvZiBwb3J0Zm9saW8gaXRlbXNcbiAgKi9cbiAgZnVuY3Rpb24gaW5zZXJ0UG9ydG9mbGlvSXRlbXMoaXRlbXMpIHtcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcnRmb2xpb19pdGVtc19jb250YWluZXInKTtcbiAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQsIGluZGV4KSB7XG4gICAgICAvLyBjcmVhdGUgbWFpbiBjb250YWluZXJcbiAgICAgIHZhciBzZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VjdGlvbicpO1xuICAgICAgc2VjdGlvbi5jbGFzc05hbWUgKz0gJyBjb250YWluZXIgc2VjdGlvbiBzZWN0aW9uLS1sZWZ0IHNlY3Rpb24tLXBvcnRmb2xpby1pdGVtICc7XG4gICAgICAvLyBjcmVhdGUgYm94IGZvciBpdGVtIHByZXZpZXdcbiAgICAgIHZhciBzZWN0aW9uTWVkaWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHNlY3Rpb25NZWRpYS5jbGFzc05hbWUgKz0gJyBzZWN0aW9uX19tZWRpYSBzZWN0aW9uX19tZWRpYS0tcG9ydGZvbGlvLWl0ZW0gJztcbiAgICAgIHNlY3Rpb25NZWRpYS5pbm5lckhUTUwgPSAnPGltZyBzcmM9XCInICsgZWxlbWVudC5wcmV2aWV3SW1hZ2UgKyAnXCIgYWx0PVwicG9ydGZvbGlvX2l0ZW1cIiAvPic7XG4gICAgICAvLyBjcmVhdGUgYm94IGZvciBpdGVtIG5hbWUgYW5kIGRlc2NyaXB0aW9uXG4gICAgICB2YXIgc2VjdGlvblRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHNlY3Rpb25UZXh0LmNsYXNzTmFtZSArPSAnIHNlY3Rpb25fX3RleHQgc2VjdGlvbl9fdGV4dC0tcG9ydGZvbGlvLWl0ZW0gJztcbiAgICAgIHNlY3Rpb25UZXh0LmlubmVySFRNTCA9ICc8aDMgY2xhc3M9XCJzZWN0aW9uX190aXRsZVwiPicgKyBlbGVtZW50Lm5hbWUgKyAnPC9oMz4nO1xuICAgICAgc2VjdGlvblRleHQuaW5uZXJIVE1MICs9ICc8cD4nICsgZWxlbWVudC5wcmV2aWV3VGV4dCArICc8L3A+JztcbiAgICAgIHNlY3Rpb25UZXh0LmlubmVySFRNTCArPSAnPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBidXR0b24tLXRleHQgYnV0dG9uLS1ncmVlbiBidXR0b24tLXNob3ctbW9yZVwiIGRhdGEtaXRlbWlkPVwiJyArIGluZGV4ICsgJ1wiPjxpbWcgc3JjPVwiLi9pbWFnZXMvaWNvbi1pbmZvLnN2Z1wiIGFsdD1cIlwiIGNsYXNzPVwiYnV0dG9uX19pY29uLS1sZWZ0XCIgLz4gWm9iYWN6IHN6Y3plZ8OzxYJ5PC9idXR0b24+JztcbiAgICAgIHNlY3Rpb24uYXBwZW5kQ2hpbGQoc2VjdGlvbk1lZGlhKTtcbiAgICAgIHNlY3Rpb24uYXBwZW5kQ2hpbGQoc2VjdGlvblRleHQpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHNlY3Rpb24pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICogRmlsbCBwb3J0Zm9saW8gaXRlbSBkZXNjcmlwdGlvbiB3aXRoIGRhdGFcbiAgKiBAcGFyYW0ge051bWJlcn0gaXRlbUlkIC0gaWQgb2YgcG9ydGZvbGlvIGl0ZW1cbiAgKi9cbiAgZnVuY3Rpb24gZmlsbFBvcnRmb2xpb0l0ZW1EZXNjcmlwdGlvbihpdGVtSWQpIHtcbiAgICB2YXIgaXRlbU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9ydGZvbGlvX19pdGVtLW5hbWUnKTtcbiAgICB2YXIgaXRlbURlc2NycHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9ydGZvbGlvX19pdGVtLWRlc2NyaXB0aW9uJyk7XG4gICAgdmFyIGltYWdlc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3J0Zm9saW9fX2ltYWdlcycpO1xuICAgIHZhciB0b29sc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b29scycpO1xuICAgIHZhciBsaXZlQXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9ydGZvbGlvX19saXZlLWF0Jyk7XG4gICAgdmFyIGV4dGVybmFsTGlua0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tLWxpdmUtYXQnKTtcblxuICAgIGl0ZW1OYW1lLmlubmVySFRNTCA9IFBPUlRGT0xJT19JVEVNU1tpdGVtSWRdLm5hbWU7XG4gICAgaXRlbURlc2NycHRpb24uaW5uZXJIVE1MID0gUE9SVEZPTElPX0lURU1TW2l0ZW1JZF0uZGVzY3JpcHRpb247XG4gICAgLy8gY2xlYXIgaW1hZ2VzIGNvbnRhaW5lciBmcm9tIG9sZCBpbWFnZXNcbiAgICBpbWFnZXNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgLy8gZmlsbCBpbWFnZXMgY29udGFpbmVyIHdpdGggbmV3IGltYWdlc1xuICAgIFBPUlRGT0xJT19JVEVNU1tpdGVtSWRdLmltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQsIGluZGV4KSB7XG4gICAgICBpbWFnZXNDb250YWluZXIuaW5uZXJIVE1MICs9ICc8aW1nIHNyYz1cIicgKyBlbGVtZW50ICsgJ1wiIGFsdD1cIicgKyBQT1JURk9MSU9fSVRFTVNbaXRlbUlkXS5uYW1lICsgJyAtICMnICsgaW5kZXggKyAnIHByZXNlbnRhdGlvbiBpbWFnZVwiIGNsYXNzPVwicG9ydGZvbGlvX19pbWFnZVwiIC8+ICc7XG4gICAgfSk7XG4gICAgdG9vbHNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgUE9SVEZPTElPX0lURU1TW2l0ZW1JZF0udG9vbHMuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICB0b29sc0NvbnRhaW5lci5pbm5lckhUTUwgKz0gJzxkaXYgY2xhc3M9XCJ0b29sc19pdGVtXCI+PGltZyBzcmM9XCInICsgVE9PTFNbZWxlbWVudF0uaWNvbiArICdcIiBhbHQ9XCJcIiBjbGFzcz1cIlwiPjxwPicgKyBUT09MU1tlbGVtZW50XS5uYW1lICsgJzwvcD48L2Rpdj4nO1xuICAgIH0pO1xuICAgIGxpdmVBdC5pbm5lckhUTUwgPSAnPHA+JyArIFBPUlRGT0xJT19JVEVNU1tpdGVtSWRdLmxpdmVBdCArICc8L3A+JztcbiAgICBleHRlcm5hbExpbmtCdXR0b24uaHJlZiA9ICcvLycgKyBQT1JURk9MSU9fSVRFTVNbaXRlbUlkXS5saXZlQXQ7XG4gIH1cblxuICAvKipcbiAgKiBNYWtlIHBvcnRmb2xpbyBpdGVtIGFsaXZlXG4gICoqL1xuICBmdW5jdGlvbiB2aWV3Q2hhbmdlcigpIHtcbiAgICB2YXIgdmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWV3Jyk7XG4gICAgdmFyIGJhY2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnV0dG9uLS1iYWNrJyk7XG4gICAgdmFyIGxpc3RJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idXR0b24tLXNob3ctbW9yZScpO1xuICAgIHZhciBwb3J0Zm9saW9EZXNjcmlwdGlvblZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2NyZWVuLS1wb3J0Zm9saW8taXRlbScpO1xuXG4gICAgLyoqXG4gICAgKiBXaGlsZSBjbGlja2luZyBcIlNob3cgbW9yZVwiLCBhY3RpdmF0ZSBkZXNjcmlwdGlvbiB2aWV3IGFuZCBmaWxsIGl0IHdpdGggZGF0YVxuICAgICogQHBhcmFtIHtPYmplY3R9IGV2dCAtIGJ1dHRvbiBjbGljayBldmVudFxuICAgICoqL1xuICAgIGZ1bmN0aW9uIG9uVmlld0NoYW5nZShldnQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy8gY2hhbmdlIGRldGFpbHMgZGF0YVxuICAgICAgaWYgKGV2dC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYnV0dG9uLS1zaG93LW1vcmUnKSkge1xuICAgICAgICB2YXIgcG9ydGZvbGlvSXRlbUlkID0gZXZ0LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWl0ZW1pZCcpO1xuICAgICAgICBmaWxsUG9ydGZvbGlvSXRlbURlc2NyaXB0aW9uKHBvcnRmb2xpb0l0ZW1JZCk7XG4gICAgICB9XG4gICAgICAvLyBjaGFuZ2UgdmlldyAtIGFkZCBcImFjdGl2ZVwiIGNsYXNzIHRvIG1haW4gdmlldyBjb250YWluZXJcbiAgICAgIHZpZXcuY2xhc3NMaXN0LnRvZ2dsZSgndmlldy0tY2hhbmdlJyk7XG4gICAgICAvLyBnbyB0byB0aGUgdG9wIG9mIHBvcnRmb2xpbyBpdGVtIGRlc2NyaXB0aW9uIGNvbnRhaW5lciB3aGlsZSBcInNob3cgbW9yZVwiIGV2ZW50XG4gICAgICBpZiAodmlldy5jbGFzc0xpc3QuY29udGFpbnMoJ3ZpZXctLWNoYW5nZScpKSB7XG4gICAgICAgIHBvcnRmb2xpb0Rlc2NyaXB0aW9uVmlldy5zY3JvbGxUb3AgPSAwO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGlzdEl0ZW1zLmxlbmd0aDsgaisrKSB7XG4gICAgICBsaXN0SXRlbXNbal0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblZpZXdDaGFuZ2UsIGZhbHNlKTtcbiAgICB9XG4gICAgZm9yICh2YXIgayA9IDA7IGsgPCBiYWNrQnV0dG9uLmxlbmd0aDsgaysrKSB7XG4gICAgICBiYWNrQnV0dG9uW2tdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25WaWV3Q2hhbmdlLCBmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICogUnVucyB3aGlsZSBkb2N1bWVudCBpcyBsb2FkZWQuLi5cbiAgKi9cbiAgZnVuY3Rpb24gbG9hZGVkKCkge1xuICAgIC8vIHByZXZlbnQgZGVmYXVsdCBzdWJtaXQgZm9ybSBhY3Rpb24sIHJlZGlyZWN0IHRvIGhhbmRsZUZvcm1TdWJtaXQoKVxuICAgIHZhciBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhY3RfZm9ybScpO1xuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgaGFuZGxlRm9ybVN1Ym1pdCwgZmFsc2UpO1xuICAgIGNvbnNvbGUubG9nKCdJbmZvOiBmb3JtIHN1Ym1pdCBmdW5jdGlvbiBsb2FkZWQnKTtcblxuICAgIC8vIG1ha2UgaW50ZXJuYWwgYnV0dG9ucyBhbGl2ZVxuICAgIHZhciBtZW51QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUtYnV0dG9uJyk7XG4gICAgbWVudUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG1lbnVUcmlnZ2VyLCBmYWxzZSk7XG4gICAgdmFyIG1lbnVCdG5DbG9zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51LWJ1dHRvbi1jbG9zZScpO1xuICAgIG1lbnVCdG5DbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG1lbnVUcmlnZ2VyLCBmYWxzZSk7XG4gICAgdmFyIG1lbnVMaW5rcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2ludGVybmFsLWxpbmsnKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lbnVMaW5rcy5sZW5ndGg7IGkrKykge1xuICAgICAgbWVudUxpbmtzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2Nyb2xsVG8sIGZhbHNlKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ0luZm86IG1lbnUgdHJpZ2dlciBmdW5jdGlvbnMgbG9hZGVkJyk7XG5cbiAgICAvLyBjcmVhdGUgcG9ydGZvbGlvIGl0ZW1zXG4gICAgaW5zZXJ0UG9ydG9mbGlvSXRlbXMoUE9SVEZPTElPX0lURU1TKTtcblxuICAgIC8vIG1ha2UgcG9ydG9mbGlvIGl0ZW0gYWxpdmVcbiAgICB2aWV3Q2hhbmdlcigpO1xuICB9XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBsb2FkZWQsIGZhbHNlKTtcbn0pKCk7XG4iXX0=\n","/*!\n *\n *  Web Starter Kit\n *  Copyright 2015 Google Inc. All rights reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    https://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License\n *\n */\n/* eslint-env browser */\n(function() {\n  'use strict';\n\n  // Check to make sure service workers are supported in the current browser,\n  // and that the current page is accessed from a secure origin. Using a\n  // service worker from an insecure origin will trigger JS console errors. See\n  // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n  var isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n      // [::1] is the IPv6 localhost address.\n      window.location.hostname === '[::1]' ||\n      // 127.0.0.1/8 is considered localhost for IPv4.\n      window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n      )\n    );\n\n  if ('serviceWorker' in navigator &&\n      (window.location.protocol === 'https:' || isLocalhost)) {\n    navigator.serviceWorker.register('service-worker.js')\n    .then(function(registration) {\n      // updatefound is fired if service-worker.js changes.\n      registration.onupdatefound = function() {\n        // updatefound is also fired the very first time the SW is installed,\n        // and there's no need to prompt for a reload at that point.\n        // So check here to see if the page is already controlled,\n        // i.e. whether there's an existing service worker.\n        if (navigator.serviceWorker.controller) {\n          // The updatefound event implies that registration.installing is set:\n          // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html\n          var installingWorker = registration.installing;\n\n          installingWorker.onstatechange = function() {\n            switch (installingWorker.state) {\n              case 'installed':\n                // At this point, the old content will have been purged and the\n                // fresh content will have been added to the cache.\n                // It's the perfect time to display a \"New content is\n                // available; please refresh.\" message in the page's interface.\n                break;\n\n              case 'redundant':\n                throw new Error('The installing ' +\n                                'service worker became redundant.');\n\n              default:\n                // Ignore\n            }\n          };\n        }\n      };\n    }).catch(function(e) {\n      console.error('Error during service worker registration:', e);\n    });\n  }\n\n  /**\n  *\n  *\n  *\n  * Custom JavaScript\n  *\n  *\n  *\n  **/\n\n  var PORTFOLIO_ITEMS = [\n    {\n      name: 'test',\n      previewText: 'Elit fringilla rutrum. Aenean sollicitudin, erat a elementum rutrum, neque sem pretium metus, quis mollis nisl nunc et massa. Vestibulum sed metus in lorem tristique ullamcorper id vitae erat.',\n      previewImage: './images/portfolio_items/1.jpg',\n      description: 'description',\n      images: ['./images/portfolio_items/1.jpg'],\n      tools: ['sketch', 'mailingHtml', 'spotify'],\n      liveAt: 'google.com'\n    },\n    {\n      name: 'test 2',\n      previewText: 'Vestibulum sed metus in lorem tristique ullamcorper id vitae erat.',\n      previewImage: './images/portfolio_items/2.jpg',\n      description: 'description 2',\n      images: ['./images/portfolio_items/2.jpg', './images/portfolio_items/1.jpg'],\n      tools: ['sketch', 'mailingHtml'],\n      liveAt: 'facebook.com'\n    }\n  ];\n\n  var TOOLS = {\n    sketch: {\n      name: 'Sketch',\n      icon: './images/tool-sketch.png'\n    },\n    mailingHtml: {\n      name: 'E-mailing HTML',\n      icon: './images/tool-template.png'\n    },\n    spotify: {\n      name: 'Spotify',\n      icon: './images/tool-spotify.png'\n    }\n  };\n\n  /**\n  * Gets contact form input values\n  * @return {object} set of inputs -> object[input_name] = input_value\n  */\n  function getFormData() {\n    var form = document.getElementById('contact_form');\n    // get form inputs data\n    var data = {};\n    Object.keys(form.elements).map(function(key) {\n      if (isNaN(key)) {\n        data[key] = form.elements[key].value;\n      }\n    });\n    return data;\n  }\n\n  /**\n  * Email validation regexp\n  * @param {string} email for validation\n  * @return {boolean} email validation result\n  */\n  function emailValid(email) {\n    var re = /^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i;\n    return !re.test(email);\n  }\n\n  /**\n  * Form state - loading\n  * @param {Object} event DOM form event\n  * @return {boolean} is loading? true\n  */\n  function formLoading(event) {\n    // make visual change for loading state\n    event.target.children.contact_form__submit.disabled = true;\n    event.target.children.contact_form__submit.innerHTML = 'Wysyłanie...';\n    event.target.children.contact_form__submit.className += ' button--loading';\n    document.getElementById('form__error').style.display = 'none';\n\n    return true;\n  }\n  /**\n  * Form loading state - reset\n  * @param {Object} event DOM form event\n  * @return {boolean} is loading? false\n  */\n  function formLoadingReset(event) {\n    // make visual change for loading state\n    event.target.children.contact_form__submit.disabled = false;\n    event.target.children.contact_form__submit.innerHTML = 'Wyślij';\n    event.target.children.contact_form__submit.className = 'button button--primary';\n\n    return false;\n  }\n  /**\n  * Detects empty inputs in form\n  * @param {Object} event DOM form event\n  * @return {boolean} every form inputs filled?\n  */\n  function inputsFilled(event) {\n    var filled = true;\n    if (event.target.message.value.length === 0) {\n      filled = false;\n    }\n    if (event.target.name.value.length === 0) {\n      filled = false;\n    }\n    if (event.target.email.value.length === 0) {\n      filled = false;\n    }\n\n    return filled;\n  }\n\n  /**\n  * Send form data\n  * @param {Object} event DOM event\n  */\n  function handleFormSubmit(event) {\n    event.preventDefault();\n    var data = getFormData();\n    var isLoading = false;\n    var allInputsFilled = inputsFilled(event);\n\n    // VALIDATION\n    if (isLoading || !allInputsFilled) {\n      document.getElementById('form__error').innerHTML = 'Uzupełnij wszystkie pola formularza';\n      document.getElementById('form__error').style.display = 'block';\n    } else if (emailValid(data.email)) {\n      document.getElementById('form__error').innerHTML = 'Wpisz prawidłowy adres e-mail';\n      document.getElementById('form__error').style.display = 'block';\n    } else {\n      // VALIDATION PASSED\n      isLoading = formLoading(event);\n      var url = event.target.action;\n      var xhr = new XMLHttpRequest();\n      xhr.open('POST', url);\n      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n      xhr.onreadystatechange = function() {\n        isLoading = formLoadingReset(event);\n        if (xhr.status === 200) {\n          document.getElementById('contact_form').style.display = 'none';\n          document.getElementById('thankyou_message').style.display = 'block';\n        } else {\n          document.getElementById('form__error').innerHTML = 'Coś poszło nie tak :( <br /> Wyślij proszę e-mail na adres: <a href=\"mailto:waskowski.mikolaj@gmail.com\">waskowski.mikolaj@gmail.com</a>. <br /> Dziękuję!';\n          document.getElementById('form__error').style.display = 'block';\n          console.log(xhr.responseText);\n        }\n      };\n      // url encode form data for sending as post data\n      var encoded = Object.keys(data).map(function(key) {\n        return encodeURIComponent(key) + '=' + encodeURIComponent(data[key]);\n      }).join('&');\n\n      xhr.send(encoded);\n    }\n  }\n\n  /**\n  * Activating overlay menu\n  */\n  function menuTrigger() {\n    var overlay = document.getElementById('overlay');\n    overlay.classList.toggle('menu-overlay--open');\n  }\n\n  /**\n  * Check that menu is opened (overlay is active)\n  * @return {boolean} Menu active?\n  */\n  function overlayActive() {\n    return document.getElementById('overlay').classList.contains('menu-overlay--open');\n  }\n\n  /**\n  * Scrolls to element, closing menu overlay if needed\n  * @param {Object} event DOM event\n  */\n  function scrollTo(event) {\n    // goto section marked as button data-goto attribute\n    document.getElementById(event.target.getAttribute('data-goto')).scrollIntoView({\n      behavior: 'smooth'\n    });\n    // need to close menu overlay?\n    if (overlayActive()) {\n      menuTrigger();\n    }\n  }\n\n  /**\n  * Fill portfolio with Portfolio_items\n  * @param {Array} items - array of portfolio items\n  */\n  function insertPortoflioItems(items) {\n    var container = document.getElementById('portfolio_items_container');\n    items.forEach(function(element, index) {\n      // create main container\n      var section = document.createElement('section');\n      section.className += ' container section section--left section--portfolio-item ';\n      // create box for item preview\n      var sectionMedia = document.createElement('div');\n      sectionMedia.className += ' section__media section__media--portfolio-item ';\n      sectionMedia.innerHTML = '<img src=\"' + element.previewImage + '\" alt=\"portfolio_item\" />';\n      // create box for item name and description\n      var sectionText = document.createElement('div');\n      sectionText.className += ' section__text section__text--portfolio-item ';\n      sectionText.innerHTML = '<h3 class=\"section__title\">' + element.name + '</h3>';\n      sectionText.innerHTML += '<p>' + element.previewText + '</p>';\n      sectionText.innerHTML += '<button class=\"button button--text button--green button--show-more\" data-itemid=\"' + index + '\"><img src=\"./images/icon-info.svg\" alt=\"\" class=\"button__icon--left\" /> Zobacz szczegóły</button>';\n      section.appendChild(sectionMedia);\n      section.appendChild(sectionText);\n      container.appendChild(section);\n    });\n  }\n\n  /**\n  * Fill portfolio item description with data\n  * @param {Number} itemId - id of portfolio item\n  */\n  function fillPortfolioItemDescription(itemId) {\n    var itemName = document.querySelector('.portfolio__item-name');\n    var itemDescrption = document.querySelector('.portfolio__item-description');\n    var imagesContainer = document.querySelector('.portfolio__images');\n    var toolsContainer = document.querySelector('.tools');\n    var liveAt = document.querySelector('.portfolio__live-at');\n    var externalLinkButton = document.querySelector('.button--live-at');\n\n    itemName.innerHTML = PORTFOLIO_ITEMS[itemId].name;\n    itemDescrption.innerHTML = PORTFOLIO_ITEMS[itemId].description;\n    // clear images container from old images\n    imagesContainer.innerHTML = '';\n    // fill images container with new images\n    PORTFOLIO_ITEMS[itemId].images.forEach(function(element, index) {\n      imagesContainer.innerHTML += '<img src=\"' + element + '\" alt=\"' + PORTFOLIO_ITEMS[itemId].name + ' - #' + index + ' presentation image\" class=\"portfolio__image\" /> ';\n    });\n    toolsContainer.innerHTML = '';\n    PORTFOLIO_ITEMS[itemId].tools.forEach(function(element) {\n      toolsContainer.innerHTML += '<div class=\"tools_item\"><img src=\"' + TOOLS[element].icon + '\" alt=\"\" class=\"\"><p>' + TOOLS[element].name + '</p></div>';\n    });\n    liveAt.innerHTML = '<p>' + PORTFOLIO_ITEMS[itemId].liveAt + '</p>';\n    externalLinkButton.href = '//' + PORTFOLIO_ITEMS[itemId].liveAt;\n  }\n\n  /**\n  * Make portfolio item alive\n  **/\n  function viewChanger() {\n    var view = document.querySelector('.view');\n    var backButton = document.querySelectorAll('.button--back');\n    var listItems = document.querySelectorAll('.button--show-more');\n    var portfolioDescriptionView = document.querySelector('.screen--portfolio-item');\n\n    /**\n    * While clicking \"Show more\", activate description view and fill it with data\n    * @param {Object} evt - button click event\n    **/\n    function onViewChange(evt) {\n      evt.preventDefault();\n      // change details data\n      if (evt.currentTarget.classList.contains('button--show-more')) {\n        var portfolioItemId = evt.currentTarget.getAttribute('data-itemid');\n        fillPortfolioItemDescription(portfolioItemId);\n      }\n      // change view - add \"active\" class to main view container\n      view.classList.toggle('view--change');\n      // go to the top of portfolio item description container while \"show more\" event\n      if (view.classList.contains('view--change')) {\n        portfolioDescriptionView.scrollTop = 0;\n      }\n    }\n\n    for (var j = 0; j < listItems.length; j++) {\n      listItems[j].addEventListener('click', onViewChange, false);\n    }\n    for (var k = 0; k < backButton.length; k++) {\n      backButton[k].addEventListener('click', onViewChange, false);\n    }\n  }\n\n  /**\n  * Runs while document is loaded...\n  */\n  function loaded() {\n    // prevent default submit form action, redirect to handleFormSubmit()\n    var form = document.getElementById('contact_form');\n    form.addEventListener('submit', handleFormSubmit, false);\n    console.log('Info: form submit function loaded');\n\n    // make internal buttons alive\n    var menuBtn = document.getElementById('menu-button');\n    menuBtn.addEventListener('click', menuTrigger, false);\n    var menuBtnClose = document.getElementById('menu-button-close');\n    menuBtnClose.addEventListener('click', menuTrigger, false);\n    var menuLinks = document.getElementsByClassName('internal-link');\n    for (var i = 0; i < menuLinks.length; i++) {\n      menuLinks[i].addEventListener('click', scrollTo, false);\n    }\n    console.log('Info: menu trigger functions loaded');\n\n    // create portfolio items\n    insertPortoflioItems(PORTFOLIO_ITEMS);\n\n    // make portoflio item alive\n    viewChanger();\n  }\n  document.addEventListener('DOMContentLoaded', loaded, false);\n})();\n"]}